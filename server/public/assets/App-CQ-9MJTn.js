import{r as g,u as ge,R as a,a as na,g as js,c as Ws}from"./index-CBuqRydv.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qs=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,l,E)=>E?E.toUpperCase():l.toLowerCase()),Ui=o=>{const u=qs(o);return u.charAt(0).toUpperCase()+u.slice(1)},ia=(...o)=>o.filter((u,l,E)=>!!u&&u.trim()!==""&&E.indexOf(u)===l).join(" ").trim(),Vs=o=>{for(const u in o)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ks={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=g.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:l=2,absoluteStrokeWidth:E,className:v="",children:C,iconNode:N,...M},h)=>g.createElement("svg",{ref:h,...Ks,width:u,height:u,stroke:o,strokeWidth:E?Number(l)*24/Number(u):l,className:ia("lucide",v),...!C&&!Vs(M)&&{"aria-hidden":"true"},...M},[...N.map(([y,f])=>g.createElement(y,f)),...Array.isArray(C)?C:[C]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=(o,u)=>{const l=g.forwardRef(({className:E,...v},C)=>g.createElement(Gs,{ref:C,iconNode:u,className:ia(`lucide-${Us(Ui(o))}`,`lucide-${o}`,E),...v}));return l.displayName=Ui(o),l};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],aa=D("bomb",$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sa=D("check",Js);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ln=D("chevron-down",Ys);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ra=D("chevron-left",Xs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oa=D("chevron-right",Qs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],tr=D("circle-plus",er);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ir=D("clock",nr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sr=D("copy",ar);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]],la=D("dice-5",rr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Dt=D("dollar-sign",or);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],ca=D("gamepad-2",lr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],ur=D("grid-2x2",cr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M18 12.5V10a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4",key:"wc6myp"}],["path",{d:"M14 11V9a2 2 0 1 0-4 0v2",key:"94qvcw"}],["path",{d:"M10 10.5V5a2 2 0 1 0-4 0v9",key:"m1ah89"}],["path",{d:"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5",key:"t1skq1"}]],dr=D("hand-metal",hr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],fr=D("house",mr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_r=D("image",pr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vr=D("loader-circle",gr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],br=D("message-square-plus",yr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],wr=D("message-square",xr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Cn=D("package",Er);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Nr=D("pen-line",kr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Lr=D("play",Pr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tr=D("plus",Sr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Mr=D("receipt",Cr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ar=D("refresh-cw",zr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ua=D("rocket",Or);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],_t=D("rotate-cw",Br);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ha=D("save",Ir);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Rr=D("search",Zr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],da=D("send",Dr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Fr=D("shield",Hr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Wr=D("shopping-bag",jr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qr=D("shopping-cart",Ur);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sn=D("sparkles",Vr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Gr=D("square",Kr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Mn=D("tag",$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ma=D("trash-2",Jr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Ht=D("truck",Yr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Qr=D("upload",Xr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],to=D("user-plus",eo);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],io=D("user",no);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fa=D("users",ao);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],ro=D("utensils-crossed",so);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pa=D("wallet",oo);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],co=D("wrench",lo),Ye=({active:o,label:u,Icon:l,onClick:E,accent:v})=>a.createElement("button",{onClick:E,className:"flex-1 flex flex-col items-center justify-center py-3 relative text-[12px] "+(o?"text-white":"text-slate-300/80")},a.createElement(l,{size:18,className:"mb-1"}),a.createElement("span",{className:"leading-none"},u),a.createElement("span",{className:`absolute -bottom-1 h-[3px] w-10 rounded-full ${o?v==="admin"?"bg-emerald-500":v==="courier"?"bg-emerald-400":"bg-white/70":"bg-transparent"}`}));function uo({children:o}){const[u,l]=g.useState(!1);g.useEffect(()=>{const b=()=>{l(!0),setTimeout(()=>l(!1),600)};return window.addEventListener("pf:cartPulse",b),()=>window.removeEventListener("pf:cartPulse",b)},[]);const{user:E}=ge(),v=((E==null?void 0:E.role)||"user").toLowerCase(),C=v==="courier"||v==="admin",N=v==="admin",M=b=>{const w=(b||"").replace(/^#\//,"")||"home";return["home","menu","orders","profile","courier","admin"].includes(w)?w:"home"},[h,y]=g.useState(M(window.location.hash));g.useEffect(()=>{const b=()=>y(M(window.location.hash));return window.addEventListener("hashchange",b),()=>window.removeEventListener("hashchange",b)},[]);const f=b=>{window.location.hash="#/"+b,y(b)};return a.createElement("div",{className:"min-h-screen flex flex-col"},a.createElement("div",{className:"flex-1"},o),a.createElement("nav",{className:"fixed left-0 right-0 bottom-0 z-50 pf-bottom-nav pf-bottom-nav"},a.createElement("div",{className:"mx-auto max-w-xl px-3 pb-[env(safe-area-inset-bottom)]"},a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/90 backdrop-blur-sm flex"},a.createElement(Ye,{active:h==="home",label:"Home",Icon:fr,onClick:()=>f("home")}),a.createElement(Ye,{active:h==="menu",label:"Men√º",Icon:ur,onClick:()=>f("menu")}),a.createElement(Ye,{active:h==="orders",label:"Best.",Icon:Mr,onClick:()=>f("orders")}),a.createElement(Ye,{active:h==="profile",label:"Profil",Icon:io,onClick:()=>f("profile")}),C&&a.createElement(Ye,{active:h==="courier",label:"Kurier",Icon:Ht,accent:"courier",onClick:()=>f("courier")}),N&&a.createElement(Ye,{active:h==="admin",label:"Admin",Icon:Fr,accent:"admin",onClick:()=>f("admin")})),a.createElement("div",{className:"absolute inset-0 pointer-events-none"}))))}function mt({icon:o,label:u,sub:l,onClick:E}){return a.createElement("button",{onClick:E,className:"card flex items-center gap-3 p-3 active:scale-[0.99] transition hover:-translate-y-0.5"},a.createElement("div",{className:"w-11 h-11 rounded-xl bg-emerald-600/30 flex items-center justify-center"},a.createElement(o,{size:22})),a.createElement("div",{className:"text-left"},a.createElement("div",{className:"font-semibold"},u),l&&a.createElement("div",{className:"text-xs opacity-70"},l)),a.createElement(oa,{className:"ml-auto opacity-60",size:18}))}function wn({goTo:o}){const{user:u,fetchWithAuth:l}=ge(),[E,v]=g.useState({products:[],categories:[]}),[C,N]=g.useState([]),[M,h]=g.useState([]),[y,f]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const k=await fetch("/api/products").then(S=>S.json());v({products:k.products||[],categories:k.categories||[]})}catch{}try{const k=await l("/api/my/orders").then(S=>S.json());N(k.orders||[])}catch{}try{const k=await l("/api/dm/recipients").then(S=>S.json()).catch(()=>({}));k!=null&&k.recipients&&h(k.recipients)}catch{}f(!1)})()},[]);const b=g.useMemo(()=>(E.products||[]).filter(S=>S.featured||S.sale_price_cents!=null).slice(0,12),[E.products]),w=(C==null?void 0:C[0])||null,d=(u==null?void 0:u.role)||"user",P=!(d==="admin"||d==="courier"),p=k=>typeof o=="function"?o(k):window.location.hash=`#/${k||""}`;return a.createElement("div",{className:"space-y-4 pf-pb-safe pf-pt-safe"},a.createElement("div",{className:"relative overflow-hidden rounded-2xl border border-slate-800 p-0"},a.createElement("div",{className:"absolute -left-10 -top-10 w-48 h-48 rounded-full bg-emerald-500/20 blur-2xl animate-pulse"}),a.createElement("div",{className:"absolute -right-12 -bottom-12 w-56 h-56 rounded-full bg-fuchsia-500/20 blur-2xl animate-pulse"}),a.createElement("div",{className:"relative p-4"},a.createElement("div",{className:"text-xs opacity-80"},"Willkommen zur√ºck"),a.createElement("div",{className:"text-2xl font-extrabold leading-tight"},"Hi ",(u==null?void 0:u.username)||"Gast"," üëã"),a.createElement("div",{className:"mt-1 text-sm opacity-80"},"Schnell bestellen. Einfach bezahlen. Live-Tracking inklusive."),a.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center"},a.createElement("div",{className:"rounded-xl bg-slate-900/60 border border-slate-800 py-2"},a.createElement("div",{className:"text-[10px] opacity-70"},"Produkte"),a.createElement("div",{className:"text-sm font-semibold"},E.products.length)),a.createElement("div",{className:"rounded-xl bg-slate-900/60 border border-slate-800 py-2"},a.createElement("div",{className:"text-[10px] opacity-70"},"Kategorien"),a.createElement("div",{className:"text-sm font-semibold"},new Set(E.products.map(k=>k.category_name)).size)),a.createElement("div",{className:"rounded-xl bg-slate-900/60 border border-slate-800 py-2"},a.createElement("div",{className:"text-[10px] opacity-70"},"Bestellungen"),a.createElement("div",{className:"text-sm font-semibold"},C.length))))),a.createElement("div",{className:"grid grid-cols-1 gap-2"},a.createElement(mt,{icon:ro,label:"Men√º ansehen",sub:`${E.products.length} Produkte ‚Ä¢ ${new Set(E.products.map(k=>k.category_name)).size} Kategorien`,onClick:()=>p("menu")}),a.createElement(mt,{icon:Wr,label:"Bestellungen",sub:"Status & Live-Tracking",onClick:()=>p("orders")}),P&&a.createElement(mt,{icon:pa,label:"Wallet",sub:"Aufladen & bezahlen",onClick:()=>p("profile")}),P&&a.createElement(mt,{icon:wr,label:"Anfrage an Plug",sub:M!=null&&M.length?`${M.length} Empf√§nger`:"Direktnachricht an Admin/Kurier",onClick:()=>p("support")}),a.createElement(mt,{icon:ca,label:"Spiele",sub:"Roulette, Blackjack, Crash, Plinko & Mines",onClick:()=>p("games")})),a.createElement("div",{className:"card"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(Sn,{size:16,className:"opacity-80"}),a.createElement("div",{className:"font-semibold"},"Highlights & Aktionen")),a.createElement("div",{className:"pf-scroll-x hide-scroll"},b.length===0&&!y&&a.createElement("div",{className:"text-sm opacity-70"},"Aktuell keine Highlights."),b.map(k=>{const S=(k.sale_price_cents??k.price_cents)/100,z=k.sale_price_cents!=null;return a.createElement("div",{key:k.id,className:"min-w-[200px] max-w-[220px] card p-0 overflow-hidden hover:-translate-y-0.5 transition"},k.banner_image_url||k.image_url?a.createElement("img",{src:k.banner_image_url||k.image_url,alt:k.name,className:"w-full h-28 object-cover",loading:"lazy"}):a.createElement("div",{className:"w-full h-28 bg-slate-800"}),a.createElement("div",{className:"p-3"},a.createElement("div",{className:"font-semibold text-sm line-clamp-2"},k.highlight_title||k.name),k.badge_text&&a.createElement("div",{className:"pf-pill mt-1",style:{background:k.badge_color||"#22c55e"}},k.badge_text),a.createElement("div",{className:"text-sm mt-1"},z&&a.createElement("span",{className:"opacity-60 line-through mr-1"},(k.price_cents/100).toFixed(2)," ‚Ç¨"),a.createElement("span",{className:"font-semibold"},S.toFixed(2)," ‚Ç¨"))))}),y&&Array.from({length:4}).map((k,S)=>a.createElement("div",{key:S,className:"min-w-[200px] h-[160px] rounded-2xl bg-slate-800/60 animate-pulse"})))),w&&a.createElement("div",{className:"card"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"font-semibold"},"Letzte Bestellung #",w.id),a.createElement("div",{className:"pf-pill bg-slate-700/60"},w.status)),a.createElement("div",{className:"text-sm opacity-80 mt-1"},"Summe ",(w.total_cents/100).toFixed(2)," ‚Ç¨ ",w.eta_at?`‚Ä¢ ETA ${new Date(w.eta_at).toLocaleTimeString().slice(0,5)}`:""),a.createElement("div",{className:"mt-2 flex gap-2"},a.createElement("button",{className:"btn",onClick:()=>p("orders")},"Tracking √∂ffnen"),a.createElement("button",{className:"btn-ghost",onClick:()=>p("menu")},"Noch einmal bestellen"))),a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-gradient-to-r from-emerald-600/15 via-cyan-600/15 to-fuchsia-600/15 p-4"},a.createElement("div",{className:"text-sm font-semibold"},"Tipp"),a.createElement("div",{className:"text-xs opacity-80"},"Den Warenkorb findest du jetzt unten rechts als schwebenden Button - schneller Zugriff, egal wo du bist.")))}const qi=o=>(Number(o||0)/100).toFixed(2).replace(".",",")+" ‚Ç¨";function ho(){const{addItem:o,totalCents:u,count:l}=na(),[E,v]=g.useState([]),[C,N]=g.useState("all"),[M,h]=g.useState([]),[y,f]=g.useState("");g.useEffect(()=>{(async()=>{try{const P=await(await fetch("/api/categories")).json(),p=P.categories||P||[];v(p.map(k=>({id:k.id??k.slug??k.name,name:k.name||k.title||k.slug})))}catch{}try{const P=await(await fetch("/api/products")).json(),p=(P.products||P||[]).map(k=>({id:k.id||k.product_id,title:k.name||k.title,price_cents:k.price_cents??Math.round((k.price||0)*100),image:k.image_url||k.image||"",category_id:k.category_id??k.category,badge:k.badge_text||null}));h(p)}catch{}})()},[]);const b=g.useMemo(()=>{const d=y.trim().toLowerCase(),P=(p,k)=>(k.badge?1:0)-(p.badge?1:0)||String(p.title).localeCompare(k.title);return M.filter(p=>{const k=C==="all"||String(p.category_id)===String(C),S=!d||(p.title||"").toLowerCase().includes(d);return k&&S}).sort(P)},[M,C,y]);function w(d){const P={id:d.id,name:d.title,price_cents:d.price_cents,image_url:d.image};o?o(P,1):window.addToCart&&window.addToCart(P,1);try{const p=document.getElementById("pf-top-cart");p&&(p.classList.add("ring-2","ring-emerald-400"),setTimeout(()=>p.classList.remove("ring-2","ring-emerald-400"),450))}catch{}}return a.createElement("div",{className:"pf-pt-safe pf-pb-safe p-3 space-y-4"},a.createElement("div",{className:"rounded-2xl p-4 border border-slate-800 bg-gradient-to-r from-violet-600/10 via-fuchsia-600/10 to-rose-600/10"},a.createElement("div",{className:"text-xl font-extrabold"},"Men√º"),a.createElement("div",{className:"text-xs opacity-70 mt-1"},"Mobilfreundlich - Warenkorb als Topbar, untere Navbar bleibt frei.")),a.createElement("div",{className:"sticky top-[calc(env(safe-area-inset-top)+6px)] z-30",id:"pf-top-cart"},a.createElement("div",{className:"rounded-2xl border border-emerald-600/50 bg-emerald-500/15 px-3 py-2 flex items-center gap-2 shadow-sm backdrop-blur"},a.createElement(qr,{size:16,className:"opacity-80"}),a.createElement("div",{className:"text-sm font-semibold"},"Warenkorb: ",l," Artikel"),a.createElement("div",{className:"text-sm ml-auto font-bold"},qi(u)),a.createElement("button",{onClick:()=>{window.location.hash="#/checkout"},className:"btn ml-2"},"Zur Kasse"))),a.createElement("div",{className:"flex items-center gap-2 overflow-x-auto py-2"},a.createElement("button",{onClick:()=>N("all"),className:`px-3 py-2 text-sm rounded-xl border ${C==="all"?"border-emerald-500 bg-emerald-500/15":"border-slate-800 bg-slate-900/60"}`},"Alle"),E.map(d=>a.createElement("button",{key:d.id,onClick:()=>N(String(d.id)),className:`px-3 py-2 text-sm rounded-xl border whitespace-nowrap ${String(C)===String(d.id)?"border-emerald-500 bg-emerald-500/15":"border-slate-800 bg-slate-900/60"}`},d.name)),a.createElement("input",{value:y,onChange:d=>f(d.target.value),placeholder:"Suche‚Ä¶",className:"px-3 py-2 text-sm rounded-xl border border-slate-800 bg-slate-900/60 ml-auto"})),b.length===0?a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-center text-sm opacity-80"},"Keine Produkte gefunden."):a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},b.map(d=>a.createElement("div",{key:d.id,className:"rounded-2xl border border-slate-800 bg-slate-900/60 overflow-hidden group"},a.createElement("div",{className:"aspect-[4/3] bg-slate-800/40",style:d.image?{backgroundImage:`url(${d.image})`,backgroundSize:"cover",backgroundPosition:"center"}:{}}),a.createElement("div",{className:"p-2 space-y-1"},a.createElement("div",{className:"text-sm font-semibold line-clamp-2"},d.title),d.badge&&a.createElement("div",{className:"text-[11px] inline-flex items-center gap-1 px-2 py-0.5 rounded-full border border-slate-700 bg-slate-800/60"},a.createElement(Mn,{size:12}),a.createElement("span",null,d.badge)),a.createElement("div",{className:"pt-1 flex items-center justify-between"},a.createElement("div",{className:"text-sm font-bold text-emerald-400"},qi(d.price_cents)),a.createElement("button",{className:"btn",onClick:()=>w(d)},"In den Warenkorb")))))))}function mo({orderId:o}){const{fetchWithAuth:u,token:l}=ge(),[E,v]=g.useState(null),[C,N]=g.useState(null),[M,h]=g.useState(null),y=g.useRef(null);async function f(b){try{const w=await u(b,{headers:{accept:"application/json"}});return w.ok?await w.json():null}catch{return null}}return g.useEffect(()=>{let b=!1;(async()=>{const d=[`/api/orders/${o}/stream${l?`?t=${encodeURIComponent(l)}`:""}`,`/api/orders-live/${o}/sse`,`/api/orders/${o}/sse`];for(const P of d)try{const p=new EventSource(P);y.current=p,b=!0,p.onmessage=k=>{try{const S=JSON.parse(k.data||"{}");(S.type==="eta"||S.eta_minutes!=null)&&v(S.eta_minutes??S.eta??E),(S.type==="status"||S.status)&&N(S.status||C),(S.type==="location"||S.coords||S.lat)&&h(Date.now())}catch{}};break}catch{}})();const w=setInterval(async()=>{const d=await f(`/api/chat/order/${o}`);d!=null&&d.order&&(v(d.order.eta_minutes??E),N(d.order.status??C))},2e4);return()=>{var d;clearInterval(w);try{(d=y.current)==null||d.close()}catch{}}},[o,l]),a.createElement("div",{className:"text-xs flex items-center gap-2"},a.createElement("span",{className:"px-2 py-0.5 rounded-full bg-slate-800 border border-slate-700"},C||"-"),a.createElement("span",{className:"opacity-70"},"ETA:")," ",E!=null?`${E} Min`:"-",M&&a.createElement("span",{className:"opacity-60"},"¬∑ ",new Date(M).toLocaleTimeString()))}function fo({orderId:o,onClose:u}){const{fetchWithAuth:l,token:E,user:v}=ge(),[C,N]=g.useState([]),[M,h]=g.useState(""),y=g.useRef(null),f=`order-${o}`,b=()=>setTimeout(()=>{try{y.current.scrollTop=y.current.scrollHeight}catch{}},10),w=async(p,k)=>{try{const S=await l(p,{headers:{accept:"application/json"},...k||{}});return S.ok?await S.json():null}catch{return null}};async function d(){const p=await w(`/api/orders/${o}/messages`)||await w(`/api/chat/history?room=${encodeURIComponent(f)}`),k=(p==null?void 0:p.messages)||(p==null?void 0:p.rows)||(p==null?void 0:p.items)||[];N(k),b()}async function P(){const p={text:M,room:f};((await l(`/api/orders/${o}/messages`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(p)})).ok||(await l("/api/chat/send",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(p)})).ok)&&(h(""),d())}return g.useEffect(()=>{d()},[o]),g.useEffect(()=>{const p=[`/api/orders/${o}/stream${E?`?t=${encodeURIComponent(E)}`:""}`,`/api/chat/stream?room=${encodeURIComponent(f)}${E?`&t=${encodeURIComponent(E)}`:""}`];let k;for(const S of p)try{k=new EventSource(S);break}catch{}if(k)return k.onmessage=S=>{try{const z=JSON.parse(S.data||"{}");(z.kind==="message"||z.type==="chat"||z.text)&&d()}catch{}},()=>k.close()},[o,E]),a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center p-2 z-50",onClick:u},a.createElement("div",{className:"w-full md:w-[640px] h-[70vh] bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden",onClick:p=>p.stopPropagation()},a.createElement("div",{className:"p-2 border-b border-slate-800 flex items-center"},a.createElement("div",{className:"font-semibold"},"Chat - Bestellung #",o),a.createElement("div",{className:"ml-auto text-xs opacity-70"},(v==null?void 0:v.username)||""),a.createElement("button",{onClick:u,className:"ml-2 text-xs px-2 py-1 rounded bg-slate-800 hover:bg-slate-700"},"Schlie√üen")),a.createElement("div",{ref:y,className:"flex-1 min-h-0 overflow-y-auto p-3 space-y-2"},C.map((p,k)=>a.createElement("div",{key:p.id||k,className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm ${p.mine?"ml-auto bg-violet-600 text-white":"bg-slate-800 text-slate-100"}`},a.createElement("div",{className:"text-[11px] opacity-70"},p.sender_username||p.author||"User"),a.createElement("div",null,p.text||p.message),a.createElement("div",{className:"text-[10px] opacity-50 mt-1"},(p.created_at||"").replace("T"," ").slice(0,16))))),a.createElement("div",{className:"p-2 border-t border-slate-800 flex gap-2"},a.createElement("input",{value:M,onChange:p=>h(p.target.value),onKeyDown:p=>{p.key==="Enter"&&P()},className:"flex-1 px-3 py-2 rounded-xl bg-slate-950 border border-slate-700 text-sm",placeholder:"Nachricht‚Ä¶"}),a.createElement("button",{onClick:P,className:"btn inline-flex items-center gap-2"},a.createElement(da,{size:16})," Senden"))))}function po(){const{fetchWithAuth:o}=ge(),u=async(h,y)=>{try{const f=await o(h,{credentials:"include",...y||{},headers:{accept:"application/json",...(y==null?void 0:y.headers)||{}}});return f.ok?await f.json():null}catch{return null}},l=async()=>{const h=["/api/categories","/api/menu/categories","/api/catalog/categories","/api/admin/categories"];for(const y of h){const f=await u(y),b=(f==null?void 0:f.categories)||(Array.isArray(f)?f:null);if(Array.isArray(b))return b.map(w=>({id:w.id??w.category_id??w.slug??w.name,name:w.name||w.title||w.slug||String(w.id)}))}return[]},E=async(h="all")=>{const y=h&&h!=="all"?`?category=${encodeURIComponent(h)}`:"",f=[`/api/menu/products${y}`,`/api/products${y}`,`/api/catalog/products${y}`,"/api/products"];for(const b of f){const w=await u(b),d=(w==null?void 0:w.products)||(Array.isArray(w)?w:null);if(Array.isArray(d))return d.map(P=>({id:P.id??P.product_id,title:P.name??P.title??`#${P.id}`,image:P.image_url??P.image??P.banner_image_url??null,price_cents:Number(P.sale_price_cents??P.price_cents??Math.round((P.price??P.unit_price??P.cost??0)*100))||0,category_id:P.category_id??P.cat_id??P.category??null,in_stock:(P.in_stock??P.stock??1)!==0,badge:P.badge_text||null,badge_color:P.badge_color||null,desc:P.description||P.desc||""}))}return[]},v=h=>{var b,w;const y=d=>{try{return JSON.parse(h[d]||"null")||null}catch{return null}},f=d=>(Array.isArray(d)?d:[]).map(P=>({id:P.id??P.item_id??P.product_id,name:P.name||P.title||P.product_name||`#${P.product_id||P.id}`,qty:Number(P.qty??P.quantity??P.count??1)||1,price_cents:Number(P.price_cents??Math.round((P.price??P.unit_price??0)*100))||0}));return f(h.items)||f(h.lines)||f((b=y("items_json"))==null?void 0:b.items)||f((w=y("cart_json"))==null?void 0:w.items)||f(y("products_json"))||[]};return{j:u,categories:l,products:E,myOrders:async()=>{const h=["/api/my/orders","/api/orders?scope=me","/api/orders"];for(const y of h){const f=await u(y),b=(f==null?void 0:f.orders)||(Array.isArray(f)?f:null);if(Array.isArray(b))return b.map(w=>({id:w.id??w.order_id,status:String(w.status||"").toLowerCase(),created_at:w.created_at||w.createdAt||null,items:v(w),total_cents:Number(w.total_cents??w.total??w.sum??0)}))}return[]},courierOrders:async()=>{const h=["/api/courier/orders","/api/orders?scope=courier","/api/orders","/api/admin/orders"];for(const y of h){const f=await u(y),b=(f==null?void 0:f.orders)||(Array.isArray(f)?f:null);if(Array.isArray(b))return b.map(w=>({id:w.id??w.order_id,status:String(w.status||"").toLowerCase(),created_at:w.created_at||w.createdAt||null,customer:w.customer||w.customer_name||w.username||"",address:w.address||w.delivery_address||"",total_cents:Number(w.total_cents??w.total??w.sum??0),mine:!!(w._mine||w.mine||w.assigned_to_me)}))}return[]},postAny:async(h,y)=>{for(const f of h)if(await u(f,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(y||{})})!==null)return!0;return!1}}}const Vi=o=>(Number(o||0)/100).toFixed(2).replace(".",",")+" ‚Ç¨",En=o=>["completed","abgeschlossen","fertig","delivered","done","complete"].includes(String(o||"").toLowerCase());function _o(){const o=po(),[u,l]=g.useState([]),[E,v]=g.useState(null);async function C(){l(await o.myOrders())}g.useEffect(()=>{C()},[]);const N=g.useMemo(()=>{const f=[],b=[];for(const w of u)(En(w.status)?b:f).push(w);return{active:f,past:b}},[u]);function M({value:f,setValue:b,label:w}){return a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"text-xs opacity-70 w-20"},w),[1,2,3,4,5].map(d=>a.createElement("button",{key:d,onClick:()=>b(d),className:`text-lg ${d<=f?"text-yellow-400":"text-slate-600"}`},"‚òÖ")))}async function h(f,{quality:b,wait:w,service:d}){await o.postAny([`/api/orders/${f}/rate`,`/api/orders/${f}/review`,"/api/reviews"],{order_id:f,quality:b,wait:w,service:d})}const y=({o:f})=>{const[b,w]=g.useState(5),[d,P]=g.useState(5),[p,k]=g.useState(5),[S,z]=g.useState(!1),B=(f.items||[]).reduce((_,A)=>_+Number(A.price_cents||0)*(A.qty||1),0);return a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-3 space-y-2"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"font-semibold"},"#",f.id),!En(f.status)&&a.createElement(mo,{orderId:f.id})),a.createElement("div",{className:"text-xs opacity-70"},(f.created_at||"").replace("T"," ").slice(0,16)," ‚Ä¢ ",f.status),a.createElement("div",{className:"space-y-1 text-sm"},(f.items||[]).length?f.items.map((_,A)=>a.createElement("div",{key:A,className:"flex items-center justify-between"},a.createElement("div",null,_.qty||1,"√ó ",_.name||_.title),a.createElement("div",{className:"opacity-80"},Vi((_.price_cents||0)*(_.qty||1))))):a.createElement("div",{className:"text-xs opacity-60"},"Keine Positionen vorhanden."),a.createElement("div",{className:"pt-2 mt-1 border-t border-slate-800 flex items-center justify-between font-semibold"},a.createElement("div",null,"Gesamt"),a.createElement("div",null,Vi(B)))),a.createElement("div",{className:"flex gap-2 pt-1"},a.createElement("button",{className:"btn-ghost",onClick:()=>v(f.id)},"Chat")),En(f.status)&&a.createElement("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-3 space-y-2"},a.createElement("div",{className:"text-xs opacity-80 mb-1"},"Bestellung bewerten"),a.createElement(M,{value:b,setValue:w,label:"Qualit√§t"}),a.createElement(M,{value:d,setValue:P,label:"Wartezeit"}),a.createElement(M,{value:p,setValue:k,label:"Service"}),a.createElement("button",{className:"btn mt-1",onClick:async()=>{await h(f.id,{quality:b,wait:d,service:p}),z(!0)}},"Bewertung absenden"),S&&a.createElement("div",{className:"text-xs text-emerald-400"},"Danke f√ºr die Bewertung!")))};return a.createElement("div",{className:"pf-pt-safe pf-pb-safe p-3 space-y-4"},a.createElement("div",{className:"rounded-2xl p-4 border border-slate-800 bg-gradient-to-r from-emerald-600/10 via-cyan-600/10 to-fuchsia-600/10"},a.createElement("div",{className:"text-xl font-extrabold"},"Meine Bestellungen"),a.createElement("div",{className:"text-xs opacity-70 mt-1"},"Live verfolgen, chatten & bewerten")),a.createElement("section",{className:"space-y-2"},a.createElement("div",{className:"text-sm opacity-80"},"Aktiv"),N.active.length===0?a.createElement("div",{className:"text-xs opacity-60"},"Keine aktiven Bestellungen."):N.active.map(f=>a.createElement(y,{key:f.id,o:f}))),a.createElement("section",{className:"space-y-2"},a.createElement("div",{className:"text-sm opacity-80"},"Vergangen"),N.past.length===0?a.createElement("div",{className:"text-xs opacity-60"},"Noch keine abgeschlossenen Bestellungen."):N.past.map(f=>a.createElement(y,{key:f.id,o:f}))),E&&a.createElement(fo,{orderId:E,onClose:()=>v(null)}))}function go({goTo:o}){const{fetchWithAuth:u,user:l}=ge(),[E,v]=g.useState(null),[C,N]=g.useState({orders:0,inventory:0}),[M,h]=g.useState([]),[y,f]=g.useState(1e3),[b,w]=g.useState(""),d=async()=>{try{const k=await u("/api/profile").then(z=>z.json());v(k.user),N(k.stats||{orders:0,inventory:0});const S=await u("/api/inventory").then(z=>z.json()).catch(()=>({items:[]}));h(S.items||[])}catch{w("Fehler beim Laden")}};g.useEffect(()=>{d()},[]);const P=async k=>{w("");const S=await u("/api/wallet/topup",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({amount_cents:Number(k||0)})}),z=await S.json();if(!S.ok)return w("‚ùå Aufladen fehlgeschlagen");v(B=>({...B,wallet_balance_cents:z.wallet_balance_cents||0})),w("‚úÖ Wallet aufgeladen")},p=[500,1e3,2e3,5e3];return a.createElement("div",{className:"space-y-4 pf-pb-safe pf-pt-safe"},a.createElement("div",{className:"card"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-10 h-10 rounded-full bg-emerald-600/30 flex items-center justify-center"},a.createElement(pa,{size:20})),a.createElement("div",null,a.createElement("div",{className:"font-semibold"},l==null?void 0:l.username),a.createElement("div",{className:"text-xs opacity-70"},l==null?void 0:l.role)),a.createElement("div",{className:"ml-auto text-right"},a.createElement("div",{className:"text-xs opacity-70"},"Wallet"),a.createElement("div",{className:"text-xl font-extrabold"},(((E==null?void 0:E.wallet_balance_cents)||0)/100).toFixed(2)," ‚Ç¨")))),a.createElement("div",{className:"card"},a.createElement("div",{className:"font-semibold mb-2"},"Wallet aufladen"),a.createElement("div",{className:"grid grid-cols-4 gap-2"},p.map(k=>a.createElement("button",{key:k,className:"btn-ghost",onClick:()=>P(k)},(k/100).toFixed(0)," ‚Ç¨"))),a.createElement("div",{className:"mt-2 flex gap-2"},a.createElement("input",{className:"input flex-1",type:"number",min:"100",step:"100",value:y,onChange:k=>f(Number(k.target.value||0)),placeholder:"Betrag (Cent)"}),a.createElement("button",{className:"btn",onClick:()=>P(y)},a.createElement(tr,{size:16,className:"mr-1"}),"Aufladen")),b&&a.createElement("div",{className:"text-sm opacity-80 mt-2"},b)),a.createElement("div",{className:"card"},a.createElement("div",{className:"font-semibold mb-2"},"Inventar"),M.length===0?a.createElement("div",{className:"text-sm opacity-70"},"Noch nichts im Inventar."):a.createElement("div",{className:"space-y-2"},M.map(k=>a.createElement("div",{key:k.id,className:"flex items-center justify-between"},a.createElement("div",null,k.item_name),a.createElement("div",{className:"text-sm opacity-80"},"√ó",k.qty))))),a.createElement("div",{className:"card"},a.createElement("div",{className:"font-semibold"},"Bestellungen"),a.createElement("div",{className:"text-sm opacity-70"},"Insgesamt: ",C.orders),a.createElement("button",{className:"btn w-full mt-2",onClick:()=>o==null?void 0:o("orders")},"Zur Bestell√ºbersicht")))}var Tn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(o,u){(function(l,E){E(u)})(Ws,function(l){var E="1.9.4";function v(e){var t,n,i,s;for(n=1,i=arguments.length;n<i;n++){s=arguments[n];for(t in s)e[t]=s[t]}return e}var C=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function N(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var M=0;function h(e){return"_leaflet_id"in e||(e._leaflet_id=++M),e._leaflet_id}function y(e,t,n){var i,s,r,c;return c=function(){i=!1,s&&(r.apply(n,s),s=!1)},r=function(){i?s=arguments:(e.apply(n,arguments),setTimeout(c,t),i=!0)},r}function f(e,t,n){var i=t[1],s=t[0],r=i-s;return e===i&&n?e:((e-s)%r+r)%r+s}function b(){return!1}function w(e,t){if(t===!1)return e;var n=Math.pow(10,t===void 0?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function P(e){return d(e).split(/\s+/)}function p(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?C(e.options):{});for(var n in t)e.options[n]=t[n];return e.options}function k(e,t,n){var i=[];for(var s in e)i.push(encodeURIComponent(n?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(!t||t.indexOf("?")===-1?"?":"&")+i.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function z(e,t){return e.replace(S,function(n,i){var s=t[i];if(s===void 0)throw new Error("No value provided for variable "+n);return typeof s=="function"&&(s=s(t)),s})}var B=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function _(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var V=0;function de(e){var t=+new Date,n=Math.max(0,16-(t-V));return V=t+n,window.setTimeout(e,n)}var be=window.requestAnimationFrame||G("RequestAnimationFrame")||de,gt=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function re(e,t,n){if(n&&be===de)e.call(t);else return be.call(window,N(e,t))}function me(e){e&&gt.call(window,e)}var _a={__proto__:null,extend:v,create:C,bind:N,get lastId(){return M},stamp:h,throttle:y,wrapNum:f,falseFn:b,formatNum:w,trim:d,splitWords:P,setOptions:p,getParamString:k,template:z,isArray:B,indexOf:_,emptyImageUrl:A,requestFn:be,cancelFn:gt,requestAnimFrame:re,cancelAnimFrame:me};function Ne(){}Ne.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,i=C(n);i.constructor=t,t.prototype=i;for(var s in this)Object.prototype.hasOwnProperty.call(this,s)&&s!=="prototype"&&s!=="__super__"&&(t[s]=this[s]);return e.statics&&v(t,e.statics),e.includes&&(ga(e.includes),v.apply(null,[i].concat(e.includes))),v(i,e),delete i.statics,delete i.includes,i.options&&(i.options=n.options?C(n.options):{},v(i.options,e.options)),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var r=0,c=i._initHooks.length;r<c;r++)i._initHooks[r].call(this)}},t},Ne.include=function(e){var t=this.prototype.options;return v(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},Ne.mergeOptions=function(e){return v(this.prototype.options,e),this},Ne.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function ga(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=B(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var he={on:function(e,t,n){if(typeof e=="object")for(var i in e)this._on(i,e[i],t);else{e=P(e);for(var s=0,r=e.length;s<r;s++)this._on(e[s],t,n)}return this},off:function(e,t,n){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var i in e)this._off(i,e[i],t);else{e=P(e);for(var s=arguments.length===1,r=0,c=e.length;r<c;r++)s?this._off(e[r]):this._off(e[r],t,n)}return this},_on:function(e,t,n,i){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,n)===!1){n===this&&(n=void 0);var s={fn:t,ctx:n};i&&(s.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(s)}},_off:function(e,t,n){var i,s,r;if(this._events&&(i=this._events[e],!!i)){if(arguments.length===1){if(this._firingCount)for(s=0,r=i.length;s<r;s++)i[s].fn=b;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var c=this._listens(e,t,n);if(c!==!1){var m=i[c];this._firingCount&&(m.fn=b,this._events[e]=i=i.slice()),i.splice(c,1)}}},fire:function(e,t,n){if(!this.listens(e,n))return this;var i=v({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,c=s.length;r<c;r++){var m=s[r],x=m.fn;m.once&&this.off(e,x,m.ctx),x.call(m.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(e,t,n,i){typeof e!="string"&&console.warn('"string" type argument expected');var s=t;typeof t!="function"&&(i=!!t,s=void 0,n=void 0);var r=this._events&&this._events[e];if(r&&r.length&&this._listens(e,s,n)!==!1)return!0;if(i){for(var c in this._eventParents)if(this._eventParents[c].listens(e,t,n,i))return!0}return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var s=0,r=i.length;s<r;s++)if(i[s].fn===t&&i[s].ctx===n)return s;return!1},once:function(e,t,n){if(typeof e=="object")for(var i in e)this._on(i,e[i],t,!0);else{e=P(e);for(var s=0,r=e.length;s<r;s++)this._on(e[s],t,n,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[h(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[h(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,v({layer:e.target,propagatedFrom:e.target},e),!0)}};he.addEventListener=he.on,he.removeEventListener=he.clearAllEventListeners=he.off,he.addOneTimeEventListener=he.once,he.fireEvent=he.fire,he.hasEventListeners=he.listens;var Xe=Ne.extend(he);function H(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var An=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new H(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new H(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=An(this.x),this.y=An(this.y),this},distanceTo:function(e){e=R(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=R(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=R(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function R(e,t,n){return e instanceof H?e:B(e)?new H(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new H(e.x,e.y):new H(e,t,n)}function Y(e,t){if(e)for(var n=t?[e,t]:e,i=0,s=n.length;i<s;i++)this.extend(n[i])}Y.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof H||typeof e[0]=="number"||"x"in e)t=n=R(e);else if(e=oe(e),t=e.min,n=e.max,!t||!n)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=n.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(e){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return typeof e[0]=="number"||e instanceof H?e=R(e):e=oe(e),e instanceof Y?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=oe(e);var t=this.min,n=this.max,i=e.min,s=e.max,r=s.x>=t.x&&i.x<=n.x,c=s.y>=t.y&&i.y<=n.y;return r&&c},overlaps:function(e){e=oe(e);var t=this.min,n=this.max,i=e.min,s=e.max,r=s.x>t.x&&i.x<n.x,c=s.y>t.y&&i.y<n.y;return r&&c},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,s=Math.abs(t.y-n.y)*e;return oe(R(t.x-i,t.y-s),R(n.x+i,n.y+s))},equals:function(e){return e?(e=oe(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function oe(e,t){return!e||e instanceof Y?e:new Y(e,t)}function le(e,t){if(e)for(var n=t?[e,t]:e,i=0,s=n.length;i<s;i++)this.extend(n[i])}le.prototype={extend:function(e){var t=this._southWest,n=this._northEast,i,s;if(e instanceof $)i=e,s=e;else if(e instanceof le){if(i=e._southWest,s=e._northEast,!i||!s)return this}else return e?this.extend(U(e)||ee(e)):this;return!t&&!n?(this._southWest=new $(i.lat,i.lng),this._northEast=new $(s.lat,s.lng)):(t.lat=Math.min(i.lat,t.lat),t.lng=Math.min(i.lng,t.lng),n.lat=Math.max(s.lat,n.lat),n.lng=Math.max(s.lng,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,s=Math.abs(t.lng-n.lng)*e;return new le(new $(t.lat-i,t.lng-s),new $(n.lat+i,n.lng+s))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof $||"lat"in e?e=U(e):e=ee(e);var t=this._southWest,n=this._northEast,i,s;return e instanceof le?(i=e.getSouthWest(),s=e.getNorthEast()):i=s=e,i.lat>=t.lat&&s.lat<=n.lat&&i.lng>=t.lng&&s.lng<=n.lng},intersects:function(e){e=ee(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),r=s.lat>=t.lat&&i.lat<=n.lat,c=s.lng>=t.lng&&i.lng<=n.lng;return r&&c},overlaps:function(e){e=ee(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),r=s.lat>t.lat&&i.lat<n.lat,c=s.lng>t.lng&&i.lng<n.lng;return r&&c},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=ee(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(e,t){return e instanceof le?e:new le(e,t)}function $(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}$.prototype={equals:function(e,t){if(!e)return!1;e=U(e);var n=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+w(this.lat,e)+", "+w(this.lng,e)+")"},distanceTo:function(e){return Me.distance(this,U(e))},wrap:function(){return Me.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return ee([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function U(e,t,n){return e instanceof $?e:B(e)&&typeof e[0]!="object"?e.length===3?new $(e[0],e[1],e[2]):e.length===2?new $(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new $(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new $(e,t,n)}var Pe={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),i=this.transformation.transform(t.min,n),s=this.transformation.transform(t.max,n);return new Y(i,s)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?f(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?f(e.lat,this.wrapLat,!0):e.lat,i=e.alt;return new $(n,t,i)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,s=t.lng-n.lng;if(i===0&&s===0)return e;var r=e.getSouthWest(),c=e.getNorthEast(),m=new $(r.lat-i,r.lng-s),x=new $(c.lat-i,c.lng-s);return new le(m,x)}},Me=v({},Pe,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,s=t.lat*n,r=Math.sin((t.lat-e.lat)*n/2),c=Math.sin((t.lng-e.lng)*n/2),m=r*r+Math.cos(i)*Math.cos(s)*c*c,x=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return this.R*x}}),On=6378137,Ft={R:On,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),s=Math.sin(i*t);return new H(this.R*e.lng*t,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(e){var t=180/Math.PI;return new $((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=On*Math.PI;return new Y([-e,-e],[e,e])}()};function jt(e,t,n,i){if(B(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=i}jt.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new H((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function Qe(e,t,n,i){return new jt(e,t,n,i)}var Wt=v({},Me,{code:"EPSG:3857",projection:Ft,transformation:function(){var e=.5/(Math.PI*Ft.R);return Qe(e,.5,-e,.5)}()}),va=v({},Wt,{code:"EPSG:900913"});function Bn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function In(e,t){var n="",i,s,r,c,m,x;for(i=0,r=e.length;i<r;i++){for(m=e[i],s=0,c=m.length;s<c;s++)x=m[s],n+=(s?"L":"M")+x.x+" "+x.y;n+=t?I.svg?"z":"x":""}return n||"M0 0"}var Ut=document.documentElement.style,vt="ActiveXObject"in window,ya=vt&&!document.addEventListener,Zn="msLaunchUri"in navigator&&!("documentMode"in document),qt=xe("webkit"),Rn=xe("android"),Dn=xe("android 2")||xe("android 3"),ba=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xa=Rn&&xe("Google")&&ba<537&&!("AudioNode"in window),Vt=!!window.opera,Hn=!Zn&&xe("chrome"),Fn=xe("gecko")&&!qt&&!Vt&&!vt,wa=!Hn&&xe("safari"),jn=xe("phantom"),Wn="OTransition"in Ut,Ea=navigator.platform.indexOf("Win")===0,Un=vt&&"transition"in Ut,Kt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dn,qn="MozPerspective"in Ut,ka=!window.L_DISABLE_3D&&(Un||Kt||qn)&&!Wn&&!jn,et=typeof orientation<"u"||xe("mobile"),Na=et&&qt,Pa=et&&Kt,Vn=!window.PointerEvent&&window.MSPointerEvent,Kn=!!(window.PointerEvent||Vn),Gn="ontouchstart"in window||!!window.TouchEvent,La=!window.L_NO_TOUCH&&(Gn||Kn),Sa=et&&Vt,Ta=et&&Fn,Ca=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ma=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",b,t),window.removeEventListener("testPassiveEventSupport",b,t)}catch{}return e}(),za=function(){return!!document.createElement("canvas").getContext}(),Gt=!!(document.createElementNS&&Bn("svg").createSVGRect),Aa=!!Gt&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Oa=!Gt&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),Ba=navigator.platform.indexOf("Mac")===0,Ia=navigator.platform.indexOf("Linux")===0;function xe(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var I={ie:vt,ielt9:ya,edge:Zn,webkit:qt,android:Rn,android23:Dn,androidStock:xa,opera:Vt,chrome:Hn,gecko:Fn,safari:wa,phantom:jn,opera12:Wn,win:Ea,ie3d:Un,webkit3d:Kt,gecko3d:qn,any3d:ka,mobile:et,mobileWebkit:Na,mobileWebkit3d:Pa,msPointer:Vn,pointer:Kn,touch:La,touchNative:Gn,mobileOpera:Sa,mobileGecko:Ta,retina:Ca,passiveEvents:Ma,canvas:za,svg:Gt,vml:Oa,inlineSvg:Aa,mac:Ba,linux:Ia},$n=I.msPointer?"MSPointerDown":"pointerdown",Jn=I.msPointer?"MSPointerMove":"pointermove",Yn=I.msPointer?"MSPointerUp":"pointerup",Xn=I.msPointer?"MSPointerCancel":"pointercancel",$t={touchstart:$n,touchmove:Jn,touchend:Yn,touchcancel:Xn},Qn={touchstart:ja,touchmove:yt,touchend:yt,touchcancel:yt},je={},ei=!1;function Za(e,t,n){return t==="touchstart"&&Fa(),Qn[t]?(n=Qn[t].bind(this,n),e.addEventListener($t[t],n,!1),n):(console.warn("wrong event specified:",t),b)}function Ra(e,t,n){if(!$t[t]){console.warn("wrong event specified:",t);return}e.removeEventListener($t[t],n,!1)}function Da(e){je[e.pointerId]=e}function Ha(e){je[e.pointerId]&&(je[e.pointerId]=e)}function ti(e){delete je[e.pointerId]}function Fa(){ei||(document.addEventListener($n,Da,!0),document.addEventListener(Jn,Ha,!0),document.addEventListener(Yn,ti,!0),document.addEventListener(Xn,ti,!0),ei=!0)}function yt(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var n in je)t.touches.push(je[n]);t.changedTouches=[t],e(t)}}function ja(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&ae(t),yt(e,t)}function Wa(e){var t={},n,i;for(i in e)n=e[i],t[i]=n&&n.bind?n.bind(e):n;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var Ua=200;function qa(e,t){e.addEventListener("dblclick",t);var n=0,i;function s(r){if(r.detail!==1){i=r.detail;return}if(!(r.pointerType==="mouse"||r.sourceCapabilities&&!r.sourceCapabilities.firesTouchEvents)){var c=ri(r);if(!(c.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!c.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var m=Date.now();m-n<=Ua?(i++,i===2&&t(Wa(r))):i=1,n=m}}}return e.addEventListener("click",s),{dblclick:t,simDblclick:s}}function Va(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var Jt=wt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tt=wt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ni=tt==="webkitTransition"||tt==="OTransition"?tt+"End":"transitionend";function ii(e){return typeof e=="string"?document.getElementById(e):e}function nt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||n==="auto")&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return n==="auto"?null:n}function K(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function X(e){var t=e.parentNode;t&&t.removeChild(e)}function bt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function We(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function Ue(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Yt(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=xt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function j(e,t){if(e.classList!==void 0)for(var n=P(t),i=0,s=n.length;i<s;i++)e.classList.add(n[i]);else if(!Yt(e,t)){var r=xt(e);Xt(e,(r?r+" ":"")+t)}}function Q(e,t){e.classList!==void 0?e.classList.remove(t):Xt(e,d((" "+xt(e)+" ").replace(" "+t+" "," ")))}function Xt(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function xt(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function fe(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Ka(e,t)}function Ka(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch{if(t===1)return}t=Math.round(t*100),n?(n.Enabled=t!==100,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function wt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Oe(e,t,n){var i=t||new H(0,0);e.style[Jt]=(I.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function te(e,t){e._leaflet_pos=t,I.any3d?Oe(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Be(e){return e._leaflet_pos||new H(0,0)}var it,at,Qt;if("onselectstart"in document)it=function(){F(window,"selectstart",ae)},at=function(){J(window,"selectstart",ae)};else{var st=wt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(st){var e=document.documentElement.style;Qt=e[st],e[st]="none"}},at=function(){st&&(document.documentElement.style[st]=Qt,Qt=void 0)}}function en(){F(window,"dragstart",ae)}function tn(){J(window,"dragstart",ae)}var Et,nn;function an(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(kt(),Et=e,nn=e.style.outlineStyle,e.style.outlineStyle="none",F(window,"keydown",kt))}function kt(){Et&&(Et.style.outlineStyle=nn,Et=void 0,nn=void 0,J(window,"keydown",kt))}function ai(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function sn(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Ga={__proto__:null,TRANSFORM:Jt,TRANSITION:tt,TRANSITION_END:ni,get:ii,getStyle:nt,create:K,remove:X,empty:bt,toFront:We,toBack:Ue,hasClass:Yt,addClass:j,removeClass:Q,setClass:Xt,getClass:xt,setOpacity:fe,testProp:wt,setTransform:Oe,setPosition:te,getPosition:Be,get disableTextSelection(){return it},get enableTextSelection(){return at},disableImageDrag:en,enableImageDrag:tn,preventOutline:an,restoreOutline:kt,getSizedParentNode:ai,getScale:sn};function F(e,t,n,i){if(t&&typeof t=="object")for(var s in t)on(e,s,t[s],n);else{t=P(t);for(var r=0,c=t.length;r<c;r++)on(e,t[r],n,i)}return this}var we="_leaflet_events";function J(e,t,n,i){if(arguments.length===1)si(e),delete e[we];else if(t&&typeof t=="object")for(var s in t)ln(e,s,t[s],n);else if(t=P(t),arguments.length===2)si(e,function(m){return _(t,m)!==-1});else for(var r=0,c=t.length;r<c;r++)ln(e,t[r],n,i);return this}function si(e,t){for(var n in e[we]){var i=n.split(/\d/)[0];(!t||t(i))&&ln(e,i,null,null,n)}}var rn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function on(e,t,n,i){var s=t+h(n)+(i?"_"+h(i):"");if(e[we]&&e[we][s])return this;var r=function(m){return n.call(i||e,m||window.event)},c=r;!I.touchNative&&I.pointer&&t.indexOf("touch")===0?r=Za(e,t,r):I.touch&&t==="dblclick"?r=qa(e,r):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(rn[t]||t,r,I.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(r=function(m){m=m||window.event,un(e,m)&&c(m)},e.addEventListener(rn[t],r,!1)):e.addEventListener(t,c,!1):e.attachEvent("on"+t,r),e[we]=e[we]||{},e[we][s]=r}function ln(e,t,n,i,s){s=s||t+h(n)+(i?"_"+h(i):"");var r=e[we]&&e[we][s];if(!r)return this;!I.touchNative&&I.pointer&&t.indexOf("touch")===0?Ra(e,t,r):I.touch&&t==="dblclick"?Va(e,r):"removeEventListener"in e?e.removeEventListener(rn[t]||t,r,!1):e.detachEvent("on"+t,r),e[we][s]=null}function Ie(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function cn(e){return on(e,"wheel",Ie),this}function rt(e){return F(e,"mousedown touchstart dblclick contextmenu",Ie),e._leaflet_disable_click=!0,this}function ae(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ze(e){return ae(e),Ie(e),this}function ri(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function oi(e,t){if(!t)return new H(e.clientX,e.clientY);var n=sn(t),i=n.boundingClientRect;return new H((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var $a=I.linux&&I.chrome?window.devicePixelRatio:I.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function li(e){return I.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/$a:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function un(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var Ja={__proto__:null,on:F,off:J,stopPropagation:Ie,disableScrollPropagation:cn,disableClickPropagation:rt,preventDefault:ae,stop:Ze,getPropagationPath:ri,getMousePosition:oi,getWheelDelta:li,isExternalTarget:un,addListener:F,removeListener:J},ci=Xe.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Be(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=re(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),te(this._el,n),this.fire("step")},_complete:function(){me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),q=Xe.extend({options:{crs:Wt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=N(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(U(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tt&&I.any3d&&!I.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),F(this._proxy,ni,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(U(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=v({animate:n.animate},n.zoom),n.pan=v({animate:n.animate,duration:n.duration},n.pan));var i=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,n.pan&&n.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),s=this.getSize().divideBy(2),r=e instanceof H?e:this.latLngToContainerPoint(e),c=r.subtract(s).multiplyBy(1-1/i),m=this.containerPointToLatLng(s.add(c));return this.setView(m,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():ee(e);var n=R(t.paddingTopLeft||t.padding||[0,0]),i=R(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,n.add(i));if(s=typeof t.maxZoom=="number"?Math.min(t.maxZoom,s):s,s===1/0)return{center:e.getCenter(),zoom:s};var r=i.subtract(n).divideBy(2),c=this.project(e.getSouthWest(),s),m=this.project(e.getNorthEast(),s),x=this.unproject(c.add(m).divideBy(2).add(r),s);return{center:x,zoom:s}},fitBounds:function(e,t){if(e=ee(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=R(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ci,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){j(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(n=n||{},n.animate===!1||!I.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),s=this.project(e),r=this.getSize(),c=this._zoom;e=U(e),t=t===void 0?c:t;var m=Math.max(r.x,r.y),x=m*this.getZoomScale(c,t),T=s.distanceTo(i)||1,O=1.42,Z=O*O;function W(ne){var It=ne?-1:1,Rs=ne?x:m,Ds=x*x-m*m+It*Z*Z*T*T,Hs=2*Rs*Z*T,xn=Ds/Hs,Wi=Math.sqrt(xn*xn+1)-xn,Fs=Wi<1e-9?-18:Math.log(Wi);return Fs}function se(ne){return(Math.exp(ne)-Math.exp(-ne))/2}function ie(ne){return(Math.exp(ne)+Math.exp(-ne))/2}function _e(ne){return se(ne)/ie(ne)}var ce=W(0);function Je(ne){return m*(ie(ce)/ie(ce+O*ne))}function Os(ne){return m*(ie(ce)*_e(ce+O*ne)-se(ce))/Z}function Bs(ne){return 1-Math.pow(1-ne,1.5)}var Is=Date.now(),Fi=(W(1)-ce)/O,Zs=n.duration?1e3*n.duration:1e3*Fi*.8;function ji(){var ne=(Date.now()-Is)/Zs,It=Bs(ne)*Fi;ne<=1?(this._flyToFrame=re(ji,this),this._move(this.unproject(i.add(s.subtract(i).multiplyBy(Os(It)/T)),c),this.getScaleZoom(m/Je(It),c),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),ji.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=ee(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,ee(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var n=R(t.paddingTopLeft||t.padding||[0,0]),i=R(t.paddingBottomRight||t.padding||[0,0]),s=this.project(this.getCenter()),r=this.project(e),c=this.getPixelBounds(),m=oe([c.min.add(n),c.max.subtract(i)]),x=m.getSize();if(!m.contains(r)){this._enforcingBounds=!0;var T=r.subtract(m.getCenter()),O=m.extend(r).getSize().subtract(x);s.x+=T.x<0?-O.x:O.x,s.y+=T.y<0?-O.y:O.y,this.panTo(this.unproject(s),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=v({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=t.divideBy(2).round(),s=n.divideBy(2).round(),r=i.subtract(s);return!r.x&&!r.y?this:(e.animate&&e.pan?this.panBy(r):(e.pan&&this._rawPanBy(r),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(N(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=v({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=N(this._handleGeolocationResponse,this),n=N(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,n=e.coords.longitude,i=new $(t,n),s=i.toBounds(e.coords.accuracy*2),r=this._locateOptions;if(r.setView){var c=this.getBoundsZoom(s);this.setView(i,r.maxZoom?Math.min(c,r.maxZoom):c)}var m={latlng:i,bounds:s,timestamp:e.timestamp};for(var x in e.coords)typeof e.coords[x]=="number"&&(m[x]=e.coords[x]);this.fire("locationfound",m)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),X(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)X(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),i=K("div",n,t||this._mapPane);return e&&(this._panes[e]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new le(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=ee(e),n=R(n||[0,0]);var i=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),c=e.getNorthWest(),m=e.getSouthEast(),x=this.getSize().subtract(n),T=oe(this.project(m,i),this.project(c,i)).getSize(),O=I.any3d?this.options.zoomSnap:1,Z=x.x/T.x,W=x.y/T.y,se=t?Math.max(Z,W):Math.min(Z,W);return i=this.getScaleZoom(se,i),O&&(i=Math.round(i/(O/100))*(O/100),i=t?Math.ceil(i/O)*O:Math.floor(i/O)*O),Math.max(s,Math.min(r,i))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new Y(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===void 0?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(R(e),t)},layerPointToLatLng:function(e){var t=R(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(U(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ee(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return oi(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ii(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");F(t,"scroll",this._onScroll,this),this._containerId=h(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&I.any3d,j(e,"leaflet-container"+(I.touch?" leaflet-touch":"")+(I.retina?" leaflet-retina":"")+(I.ielt9?" leaflet-oldie":"")+(I.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=nt(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),te(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(j(e.markerPane,"leaflet-zoom-hide"),j(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){te(this._mapPane,new H(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var s=this._zoom!==t;this._moveStart(s,n)._move(e,t)._moveEnd(s),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){t===void 0&&(t=this._zoom);var s=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((s||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){te(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[h(this._container)]=this;var t=e?J:F;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),I.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){me(this._resizeRequest),this._resizeRequest=re(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n=[],i,s=t==="mouseout"||t==="mouseover",r=e.target||e.srcElement,c=!1;r;){if(i=this._targets[h(r)],i&&(t==="click"||t==="preclick")&&this._draggableMoved(i)){c=!0;break}if(i&&i.listens(t,!0)&&(s&&!un(r,e)||(n.push(i),s))||r===this._container)break;r=r.parentNode}return!n.length&&!c&&!s&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var n=e.type;n==="mousedown"&&an(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,n){if(e.type==="click"){var i=v({},e);i.type="preclick",this._fireDOMEvent(i,i.type,n)}var s=this._findEventTargets(e,t);if(n){for(var r=[],c=0;c<n.length;c++)n[c].listens(t,!0)&&r.push(n[c]);s=r.concat(s)}if(s.length){t==="contextmenu"&&ae(e);var m=s[0],x={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var T=m.getLatLng&&(!m._radius||m._radius<=10);x.containerPoint=T?this.latLngToContainerPoint(m.getLatLng()):this.mouseEventToContainerPoint(e),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=T?m.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(c=0;c<s.length;c++)if(s[c].fire(t,x,!0),x.originalEvent._stopped||s[c].options.bubblingMouseEvents===!1&&_(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Be(this._mapPane)||new H(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return oe([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),s=this.getSize().divideBy(2),r=new Y(i.subtract(s),i.add(s)),c=this._getBoundsOffset(r,n,t);return Math.abs(c.x)<=1&&Math.abs(c.y)<=1?e:this.unproject(i.add(c),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new Y(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=oe(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),s=i.min.subtract(e.min),r=i.max.subtract(e.max),c=this._rebound(s.x,-r.x),m=this._rebound(s.y,-r.y);return new H(c,m)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=I.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Q(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=K("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var n=Jt,i=this._proxy.style[n];Oe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){X(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Oe(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/i);return n.animate!==!0&&!this.getSize().contains(s)?!1:(re(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,j(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(N(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Q(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ya(e,t){return new q(e,t)}var ve=Ne.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return j(t,"leaflet-control"),n.indexOf("bottom")!==-1?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(X(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),ot=function(e){return new ve(e)};q.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=K("div",t+"control-container",this._container);function i(s,r){var c=t+s+" "+t+r;e[s+r]=K("div",c,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)X(this._controlCorners[e]);X(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ui=ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var i in e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return ve.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(h(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){j(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(j(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Q(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Q(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=K("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),rt(t),cn(t);var i=this._section=K("section",e+"-list");n&&(this._map.on("click",this.collapse,this),F(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=K("a",e+"-toggle",t);s.href="#",s.title="Layers",s.setAttribute("role","button"),F(s,{keydown:function(r){r.keyCode===13&&this._expandSafely()},click:function(r){ae(r),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=K("div",e+"-base",i),this._separator=K("div",e+"-separator",i),this._overlaysList=K("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&h(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(N(function(i,s){return this.options.sortFunction(i.layer,s.layer,i.name,s.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bt(this._baseLayersList),bt(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,s=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,s+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(h(e.target)),n=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),i;e.overlay?(i=document.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=n):i=this._createRadioElement("leaflet-base-layers_"+h(this),n),this._layerControlInputs.push(i),i.layerId=h(e.layer),F(i,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name;var r=document.createElement("span");t.appendChild(r),r.appendChild(i),r.appendChild(s);var c=e.overlay?this._overlaysList:this._baseLayersList;return c.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,n,i=[],s=[];this._handlingClick=!0;for(var r=e.length-1;r>=0;r--)t=e[r],n=this._getLayer(t.layerId).layer,t.checked?i.push(n):t.checked||s.push(n);for(r=0;r<s.length;r++)this._map.hasLayer(s[r])&&this._map.removeLayer(s[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,n,i=this._map.getZoom(),s=e.length-1;s>=0;s--)t=e[s],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==void 0&&i<n.options.minZoom||n.options.maxZoom!==void 0&&i>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,F(e,"click",ae),this.expand();var t=this;setTimeout(function(){J(e,"click",ae),t._preventClick=!1})}}),Xa=function(e,t,n){return new ui(e,t,n)},hn=ve.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=K("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,s){var r=K("a",n,i);return r.innerHTML=e,r.href="#",r.title=t,r.setAttribute("role","button"),r.setAttribute("aria-label",t),rt(r),F(r,"click",Ze),F(r,"click",s,this),F(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Q(this._zoomInButton,t),Q(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(j(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(j(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});q.mergeOptions({zoomControl:!0}),q.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hn,this.addControl(this.zoomControl))});var Qa=function(e){return new hn(e)},hi=ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=K("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=K("div",t,n)),e.imperial&&(this._iScale=K("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=e*3.2808399,n,i,s;t>5280?(n=t/5280,i=this._getRoundNum(n),this._updateScale(this._iScale,i+" mi",i/n)):(s=this._getRoundNum(t),this._updateScale(this._iScale,s+" ft",s/t))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),es=function(e){return new hi(e)},ts='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dn=ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(I.inlineSvg?ts+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=K("div","leaflet-control-attribution"),rt(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});q.mergeOptions({attributionControl:!0}),q.addInitHook(function(){this.options.attributionControl&&new dn().addTo(this)});var ns=function(e){return new dn(e)};ve.Layers=ui,ve.Zoom=hn,ve.Scale=hi,ve.Attribution=dn,ot.layers=Xa,ot.zoom=Qa,ot.scale=es,ot.attribution=ns;var Ee=Ne.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ee.addTo=function(e,t){return e.addHandler(t,this),this};var is={Events:he},di=I.touch?"touchstart mousedown":"mousedown",ze=Xe.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(F(this._dragStartTarget,di,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ze._dragging===this&&this.finishDrag(!0),J(this._dragStartTarget,di,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Yt(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){ze._dragging===this&&this.finishDrag();return}if(!(ze._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(ze._dragging=this,this._preventOutline&&an(this._element),en(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=ai(this._element);this._startPoint=new H(t.clientX,t.clientY),this._startPos=Be(this._element),this._parentScale=sn(n);var i=e.type==="mousedown";F(document,i?"mousemove":"touchmove",this._onMove,this),F(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,n=new H(t.clientX,t.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,ae(e),this._moved||(this.fire("dragstart"),this._moved=!0,j(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),j(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),te(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Q(document.body,"leaflet-dragging"),this._lastTarget&&(Q(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),J(document,"mousemove touchmove",this._onMove,this),J(document,"mouseup touchend touchcancel",this._onUp,this),tn(),at();var t=this._moved&&this._moving;this._moving=!1,ze._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function mi(e,t,n){var i,s=[1,4,2,8],r,c,m,x,T,O,Z,W;for(r=0,O=e.length;r<O;r++)e[r]._code=Re(e[r],t);for(m=0;m<4;m++){for(Z=s[m],i=[],r=0,O=e.length,c=O-1;r<O;c=r++)x=e[r],T=e[c],x._code&Z?T._code&Z||(W=Nt(T,x,Z,t,n),W._code=Re(W,t),i.push(W)):(T._code&Z&&(W=Nt(T,x,Z,t,n),W._code=Re(W,t),i.push(W)),i.push(x));e=i}return e}function fi(e,t){var n,i,s,r,c,m,x,T,O;if(!e||e.length===0)throw new Error("latlngs not passed");pe(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Z=U([0,0]),W=ee(e),se=W.getNorthWest().distanceTo(W.getSouthWest())*W.getNorthEast().distanceTo(W.getNorthWest());se<1700&&(Z=mn(e));var ie=e.length,_e=[];for(n=0;n<ie;n++){var ce=U(e[n]);_e.push(t.project(U([ce.lat-Z.lat,ce.lng-Z.lng])))}for(m=x=T=0,n=0,i=ie-1;n<ie;i=n++)s=_e[n],r=_e[i],c=s.y*r.x-r.y*s.x,x+=(s.x+r.x)*c,T+=(s.y+r.y)*c,m+=c*3;m===0?O=_e[0]:O=[x/m,T/m];var Je=t.unproject(R(O));return U([Je.lat+Z.lat,Je.lng+Z.lng])}function mn(e){for(var t=0,n=0,i=0,s=0;s<e.length;s++){var r=U(e[s]);t+=r.lat,n+=r.lng,i++}return U([t/i,n/i])}var as={__proto__:null,clipPolygon:mi,polygonCenter:fi,centroid:mn};function pi(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=os(e,n),e=rs(e,n),e}function _i(e,t,n){return Math.sqrt(lt(e,t,n,!0))}function ss(e,t,n){return lt(e,t,n)}function rs(e,t){var n=e.length,i=typeof Uint8Array<"u"?Uint8Array:Array,s=new i(n);s[0]=s[n-1]=1,fn(e,s,t,0,n-1);var r,c=[];for(r=0;r<n;r++)s[r]&&c.push(e[r]);return c}function fn(e,t,n,i,s){var r=0,c,m,x;for(m=i+1;m<=s-1;m++)x=lt(e[m],e[i],e[s],!0),x>r&&(c=m,r=x);r>n&&(t[c]=1,fn(e,t,n,i,c),fn(e,t,n,c,s))}function os(e,t){for(var n=[e[0]],i=1,s=0,r=e.length;i<r;i++)ls(e[i],e[s])>t&&(n.push(e[i]),s=i);return s<r-1&&n.push(e[r-1]),n}var gi;function vi(e,t,n,i,s){var r=i?gi:Re(e,n),c=Re(t,n),m,x,T;for(gi=c;;){if(!(r|c))return[e,t];if(r&c)return!1;m=r||c,x=Nt(e,t,m,n,s),T=Re(x,n),m===r?(e=x,r=T):(t=x,c=T)}}function Nt(e,t,n,i,s){var r=t.x-e.x,c=t.y-e.y,m=i.min,x=i.max,T,O;return n&8?(T=e.x+r*(x.y-e.y)/c,O=x.y):n&4?(T=e.x+r*(m.y-e.y)/c,O=m.y):n&2?(T=x.x,O=e.y+c*(x.x-e.x)/r):n&1&&(T=m.x,O=e.y+c*(m.x-e.x)/r),new H(T,O,s)}function Re(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function ls(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function lt(e,t,n,i){var s=t.x,r=t.y,c=n.x-s,m=n.y-r,x=c*c+m*m,T;return x>0&&(T=((e.x-s)*c+(e.y-r)*m)/x,T>1?(s=n.x,r=n.y):T>0&&(s+=c*T,r+=m*T)),c=e.x-s,m=e.y-r,i?c*c+m*m:new H(s,r)}function pe(e){return!B(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function yi(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pe(e)}function bi(e,t){var n,i,s,r,c,m,x,T;if(!e||e.length===0)throw new Error("latlngs not passed");pe(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var O=U([0,0]),Z=ee(e),W=Z.getNorthWest().distanceTo(Z.getSouthWest())*Z.getNorthEast().distanceTo(Z.getNorthWest());W<1700&&(O=mn(e));var se=e.length,ie=[];for(n=0;n<se;n++){var _e=U(e[n]);ie.push(t.project(U([_e.lat-O.lat,_e.lng-O.lng])))}for(n=0,i=0;n<se-1;n++)i+=ie[n].distanceTo(ie[n+1])/2;if(i===0)T=ie[0];else for(n=0,r=0;n<se-1;n++)if(c=ie[n],m=ie[n+1],s=c.distanceTo(m),r+=s,r>i){x=(r-i)/s,T=[m.x-x*(m.x-c.x),m.y-x*(m.y-c.y)];break}var ce=t.unproject(R(T));return U([ce.lat+O.lat,ce.lng+O.lng])}var cs={__proto__:null,simplify:pi,pointToSegmentDistance:_i,closestPointOnSegment:ss,clipSegment:vi,_getEdgeIntersection:Nt,_getBitCode:Re,_sqClosestPointOnSegment:lt,isFlat:pe,_flat:yi,polylineCenter:bi},pn={project:function(e){return new H(e.lng,e.lat)},unproject:function(e){return new $(e.y,e.x)},bounds:new Y([-180,-90],[180,90])},_n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),c=r*Math.sin(i),m=Math.tan(Math.PI/4-i/2)/Math.pow((1-c)/(1+c),r/2);return i=-n*Math.log(Math.max(m,1e-10)),new H(e.lng*t*n,i)},unproject:function(e){for(var t=180/Math.PI,n=this.R,i=this.R_MINOR/n,s=Math.sqrt(1-i*i),r=Math.exp(-e.y/n),c=Math.PI/2-2*Math.atan(r),m=0,x=.1,T;m<15&&Math.abs(x)>1e-7;m++)T=s*Math.sin(c),T=Math.pow((1-T)/(1+T),s/2),x=Math.PI/2-2*Math.atan(r*T)-c,c+=x;return new $(c*t,e.x*t/n)}},us={__proto__:null,LonLat:pn,Mercator:_n,SphericalMercator:Ft},hs=v({},Me,{code:"EPSG:3395",projection:_n,transformation:function(){var e=.5/(Math.PI*_n.R);return Qe(e,.5,-e,.5)}()}),xi=v({},Me,{code:"EPSG:4326",projection:pn,transformation:Qe(1/180,1,-1/180,.5)}),ds=v({},Pe,{projection:pn,transformation:Qe(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Pe.Earth=Me,Pe.EPSG3395=hs,Pe.EPSG3857=Wt,Pe.EPSG900913=va,Pe.EPSG4326=xi,Pe.Simple=ds;var ye=Xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[h(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[h(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});q.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=h(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=h(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return h(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?B(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[h(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=h(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var s=this._zoomBoundLayers[i].options;e=s.minZoom===void 0?e:Math.min(e,s.minZoom),t=s.maxZoom===void 0?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qe=ye.extend({initialize:function(e,t){p(this,t),this._layers={};var n,i;if(e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,i;for(n in this._layers)i=this._layers[n],i[e]&&i[e].apply(i,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return h(e)}}),ms=function(e,t){return new qe(e,t)},Le=qe.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),qe.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),qe.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new le;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),fs=function(e,t){return new Le(e,t)},Ve=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];typeof i=="number"&&(i=[i,i]);var s=R(i),r=R(t==="shadow"&&n.shadowAnchor||n.iconAnchor||s&&s.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return I.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function ps(e){return new Ve(e)}var ct=Ve.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof ct.imagePath!="string"&&(ct.imagePath=this._detectIconPath()),(this.options.imagePath||ct.imagePath)+Ve.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(n,i,s){var r=i.exec(n);return r&&r[s]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=K("div","leaflet-default-icon-path",document.body),t=nt(e,"background-image")||nt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),wi=Ee.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new ze(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),j(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Q(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,r=Be(t._icon),c=n.getPixelBounds(),m=n.getPixelOrigin(),x=oe(c.min._subtract(m).add(s),c.max._subtract(m).subtract(s));if(!x.contains(r)){var T=R((Math.max(x.max.x,r.x)-x.max.x)/(c.max.x-x.max.x)-(Math.min(x.min.x,r.x)-x.min.x)/(c.min.x-x.min.x),(Math.max(x.max.y,r.y)-x.max.y)/(c.max.y-x.max.y)-(Math.min(x.min.y,r.y)-x.min.y)/(c.min.y-x.min.y)).multiplyBy(i);n.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),te(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=re(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(me(this._panRequest),this._panRequest=re(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=Be(t._icon),s=t._map.layerPointToLatLng(i);n&&te(n,i),t._latlng=s,e.latlng=s,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Pt=ye.extend({options:{icon:new ct,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),n.tagName==="IMG"&&(n.alt=e.alt||"")),j(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&F(n,"focus",this._panOnFocus,this);var s=e.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&(j(s,t),s.alt=""),this._shadow=s,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(this._icon,"focus",this._panOnFocus,this),X(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&X(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&te(this._icon,e),this._shadow&&te(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(j(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wi)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wi(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&fe(this._icon,e),this._shadow&&fe(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?R(t.iconSize):R(0,0),i=t.iconAnchor?R(t.iconAnchor):R(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _s(e,t){return new Pt(e,t)}var Ae=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Lt=Ae.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=U(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Ae.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new Y(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gs(e,t){return new Lt(e,t)}var gn=Lt.extend({initialize:function(e,t,n){if(typeof t=="number"&&(t=v({},n,{radius:t})),p(this,t),this._latlng=U(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new le(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Ae.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Me.distance){var s=Math.PI/180,r=this._mRadius/Me.R/s,c=n.project([t+r,e]),m=n.project([t-r,e]),x=c.add(m).divideBy(2),T=n.unproject(x).lat,O=Math.acos((Math.cos(r*s)-Math.sin(t*s)*Math.sin(T*s))/(Math.cos(t*s)*Math.cos(T*s)))/s;(isNaN(O)||O===0)&&(O=r/Math.cos(Math.PI/180*t)),this._point=x.subtract(n.getPixelOrigin()),this._radius=isNaN(O)?0:x.x-n.project([T,e-O]).x,this._radiusY=x.y-c.y}else{var Z=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(Z).x}this._updateBounds()}});function vs(e,t,n){return new gn(e,t,n)}var Se=Ae.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,n=null,i=lt,s,r,c=0,m=this._parts.length;c<m;c++)for(var x=this._parts[c],T=1,O=x.length;T<O;T++){s=x[T-1],r=x[T];var Z=i(e,s,r,!0);Z<t&&(t=Z,n=i(e,s,r))}return n&&(n.distance=Math.sqrt(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=U(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new le,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return pe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=pe(e),i=0,s=e.length;i<s;i++)n?(t[i]=U(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new H(e,e);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i=e[0]instanceof $,s=e.length,r,c;if(i){for(c=[],r=0;r<s;r++)c[r]=this._map.latLngToLayerPoint(e[r]),n.extend(c[r]);t.push(c)}else for(r=0;r<s;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,n,i,s,r,c,m,x;for(n=0,s=0,r=this._rings.length;n<r;n++)for(x=this._rings[n],i=0,c=x.length;i<c-1;i++)m=vi(x[i],x[i+1],e,i,!0),m&&(t[s]=t[s]||[],t[s].push(m[0]),(m[1]!==x[i+1]||i===c-2)&&(t[s].push(m[1]),s++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=pi(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,s,r,c,m,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,r=this._parts.length;n<r;n++)for(m=this._parts[n],i=0,c=m.length,s=c-1;i<c;s=i++)if(!(!t&&i===0)&&_i(e,m[s],m[i])<=x)return!0;return!1}});function ys(e,t){return new Se(e,t)}Se._flat=yi;var Ke=Se.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Se.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof $&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){Se.prototype._setLatLngs.call(this,e),pe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new H(t,t);if(e=new Y(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var i=0,s=this._rings.length,r;i<s;i++)r=mi(this._rings[i],e,!0),r.length&&this._parts.push(r)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,i,s,r,c,m,x,T;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,x=this._parts.length;r<x;r++)for(n=this._parts[r],c=0,T=n.length,m=T-1;c<T;m=c++)i=n[c],s=n[m],i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(t=!t);return t||Se.prototype._containsPoint.call(this,e,!0)}});function bs(e,t){return new Ke(e,t)}var Te=Le.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=B(e)?e:e.features,n,i,s;if(t){for(n=0,i=t.length;n<i;n++)s=t[n],(s.geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var r=this.options;if(r.filter&&!r.filter(e))return this;var c=St(e,r);return c?(c.feature=Mt(e),c.defaultOptions=c.options,this.resetStyle(c),r.onEachFeature&&r.onEachFeature(e,c),this.addLayer(c)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=v({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function St(e,t){var n=e.type==="Feature"?e.geometry:e,i=n?n.coordinates:null,s=[],r=t&&t.pointToLayer,c=t&&t.coordsToLatLng||vn,m,x,T,O;if(!i&&!n)return null;switch(n.type){case"Point":return m=c(i),Ei(r,e,m,t);case"MultiPoint":for(T=0,O=i.length;T<O;T++)m=c(i[T]),s.push(Ei(r,e,m,t));return new Le(s);case"LineString":case"MultiLineString":return x=Tt(i,n.type==="LineString"?0:1,c),new Se(x,t);case"Polygon":case"MultiPolygon":return x=Tt(i,n.type==="Polygon"?1:2,c),new Ke(x,t);case"GeometryCollection":for(T=0,O=n.geometries.length;T<O;T++){var Z=St({geometry:n.geometries[T],type:"Feature",properties:e.properties},t);Z&&s.push(Z)}return new Le(s);case"FeatureCollection":for(T=0,O=n.features.length;T<O;T++){var W=St(n.features[T],t);W&&s.push(W)}return new Le(s);default:throw new Error("Invalid GeoJSON object.")}}function Ei(e,t,n,i){return e?e(t,n):new Pt(n,i&&i.markersInheritOptions&&i)}function vn(e){return new $(e[1],e[0],e[2])}function Tt(e,t,n){for(var i=[],s=0,r=e.length,c;s<r;s++)c=t?Tt(e[s],t-1,n):(n||vn)(e[s]),i.push(c);return i}function yn(e,t){return e=U(e),e.alt!==void 0?[w(e.lng,t),w(e.lat,t),w(e.alt,t)]:[w(e.lng,t),w(e.lat,t)]}function Ct(e,t,n,i){for(var s=[],r=0,c=e.length;r<c;r++)s.push(t?Ct(e[r],pe(e[r])?0:t-1,n,i):yn(e[r],i));return!t&&n&&s.length>0&&s.push(s[0].slice()),s}function Ge(e,t){return e.feature?v({},e.feature,{geometry:t}):Mt(t)}function Mt(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var bn={toGeoJSON:function(e){return Ge(this,{type:"Point",coordinates:yn(this.getLatLng(),e)})}};Pt.include(bn),gn.include(bn),Lt.include(bn),Se.include({toGeoJSON:function(e){var t=!pe(this._latlngs),n=Ct(this._latlngs,t?1:0,!1,e);return Ge(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),Ke.include({toGeoJSON:function(e){var t=!pe(this._latlngs),n=t&&!pe(this._latlngs[0]),i=Ct(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),Ge(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),qe.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),Ge(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var n=t==="GeometryCollection",i=[];return this.eachLayer(function(s){if(s.toGeoJSON){var r=s.toGeoJSON(e);if(n)i.push(r.geometry);else{var c=Mt(r);c.type==="FeatureCollection"?i.push.apply(i,c.features):i.push(c)}}}),n?Ge(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});function ki(e,t){return new Te(e,t)}var xs=ki,zt=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=ee(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(j(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){X(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&We(this._image),this},bringToBack:function(){return this._map&&Ue(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ee(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:K("img");if(j(t,"leaflet-image-layer"),this._zoomAnimated&&j(t,"leaflet-zoom-animated"),this.options.className&&j(t,this.options.className),t.onselectstart=b,t.onmousemove=b,t.onload=N(this.fire,this,"load"),t.onerror=N(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Oe(this._image,n,t)},_reset:function(){var e=this._image,t=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();te(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){fe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),ws=function(e,t,n){return new zt(e,t,n)},Ni=zt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:K("video");if(j(t,"leaflet-image-layer"),this._zoomAnimated&&j(t,"leaflet-zoom-animated"),this.options.className&&j(t,this.options.className),t.onselectstart=b,t.onmousemove=b,t.onloadeddata=N(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[t.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var r=0;r<this._url.length;r++){var c=K("source");c.src=this._url[r],t.appendChild(c)}}});function Es(e,t,n){return new Ni(e,t,n)}var Pi=zt.extend({_initImage:function(){var e=this._image=this._url;j(e,"leaflet-image-layer"),this._zoomAnimated&&j(e,"leaflet-zoom-animated"),this.options.className&&j(e,this.options.className),e.onselectstart=b,e.onmousemove=b}});function ks(e,t,n){return new Pi(e,t,n)}var ke=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof $||B(e))?(this._latlng=U(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&fe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&fe(this._container,1),this.bringToFront(),this.options.interactive&&(j(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(fe(this._container,0),this._removeTimeout=setTimeout(N(X,void 0,this._container),200)):X(this._container),this.options.interactive&&(Q(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=U(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&We(this._container),this},bringToBack:function(){return this._map&&Ue(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Le){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?te(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});q.include({_initOverlay:function(e,t,n,i){var s=t;return s instanceof e||(s=new e(i).setContent(t)),n&&s.setLatLng(n),s}}),ye.include({_initOverlay:function(e,t,n,i){var s=n;return s instanceof e?(p(s,i),s._source=this):(s=t&&!i?t:new e(i,this),s.setContent(n)),s}});var At=ke.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,ke.prototype.openOn.call(this,e)},onAdd:function(e){ke.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ae||this._source.on("preclick",Ie))},onRemove:function(e){ke.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ae||this._source.off("preclick",Ie))},getEvents:function(){var e=ke.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=K("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=K("div",e+"-content-wrapper",t);if(this._contentNode=K("div",e+"-content",n),rt(t),cn(this._contentNode),F(t,"contextmenu",Ie),this._tipContainer=K("div",e+"-tip-container",t),this._tip=K("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=K("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',F(i,"click",function(s){ae(s),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&i>s?(t.height=s+"px",j(e,r)):Q(e,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();te(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(nt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,s=new H(this._containerLeft,-n-this._containerBottom);s._add(Be(this._container));var r=e.layerPointToContainerPoint(s),c=R(this.options.autoPanPadding),m=R(this.options.autoPanPaddingTopLeft||c),x=R(this.options.autoPanPaddingBottomRight||c),T=e.getSize(),O=0,Z=0;r.x+i+x.x>T.x&&(O=r.x+i-T.x+x.x),r.x-O-m.x<0&&(O=r.x-m.x),r.y+n+x.y>T.y&&(Z=r.y+n-T.y+x.y),r.y-Z-m.y<0&&(Z=r.y-m.y),(O||Z)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([O,Z]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ns=function(e,t){return new At(e,t)};q.mergeOptions({closePopupOnClick:!0}),q.include({openPopup:function(e,t,n){return this._initOverlay(At,e,t,n).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),ye.include({bindPopup:function(e,t){return this._popup=this._initOverlay(At,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Le||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Ze(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof Ae)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Ot=ke.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){ke.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){ke.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=ke.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=K("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,s=this._container,r=i.latLngToContainerPoint(i.getCenter()),c=i.layerPointToContainerPoint(e),m=this.options.direction,x=s.offsetWidth,T=s.offsetHeight,O=R(this.options.offset),Z=this._getAnchor();m==="top"?(t=x/2,n=T):m==="bottom"?(t=x/2,n=0):m==="center"?(t=x/2,n=T/2):m==="right"?(t=0,n=T/2):m==="left"?(t=x,n=T/2):c.x<r.x?(m="right",t=0,n=T/2):(m="left",t=x+(O.x+Z.x)*2,n=T/2),e=e.subtract(R(t,n,!0)).add(O).add(Z),Q(s,"leaflet-tooltip-right"),Q(s,"leaflet-tooltip-left"),Q(s,"leaflet-tooltip-top"),Q(s,"leaflet-tooltip-bottom"),j(s,"leaflet-tooltip-"+m),te(s,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&fe(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ps=function(e,t){return new Ot(e,t)};q.include({openTooltip:function(e,t,n){return this._initOverlay(Ot,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),ye.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ot,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Le||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(F(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),F(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,n,i;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.mouseEventToContainerPoint(e.originalEvent),i=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(t)}});var Li=Ve.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(bt(t),t.appendChild(n.html)):t.innerHTML=n.html!==!1?n.html:"",n.bgPos){var i=R(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ls(e){return new Li(e)}Ve.Default=ct;var ut=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:I.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),X(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(We(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof H?e:new H(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-1/0,1/0),i=0,s=t.length,r;i<s;i++)r=t[i].style.zIndex,t[i]!==this._container&&r&&(n=e(n,+r));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!I.ielt9){fe(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var s=this._tiles[i];if(!(!s.current||!s.loaded)){var r=Math.min(1,(e-s.loaded)/200);fe(s.el,r),r<1?t=!0:(s.active?n=!0:this._onOpaqueTile(s),s.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(me(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=K("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(X(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],s=this._map;return i||(i=this._levels[e]={},i.el=K("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,s.getCenter(),s.getZoom()),b(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)X(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var s=Math.floor(e/2),r=Math.floor(t/2),c=n-1,m=new H(+s,+r);m.z=+c;var x=this._tileCoordsToKey(m),T=this._tiles[x];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),c>i?this._retainParent(s,r,c,i):!1)},_retainChildren:function(e,t,n,i){for(var s=2*e;s<2*e+2;s++)for(var r=2*t;r<2*t+2;r++){var c=new H(s,r);c.z=n+1;var m=this._tileCoordsToKey(c),x=this._tiles[m];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);n+1<i&&this._retainChildren(s,r,n+1,i)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var s=Math.round(t);this.options.maxZoom!==void 0&&s>this.options.maxZoom||this.options.minZoom!==void 0&&s<this.options.minZoom?s=void 0:s=this._clampZoom(s);var r=this.options.updateWhenZooming&&s!==this._tileZoom;(!i||r)&&(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),s=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();I.any3d?Oe(e.el,s,i):te(e.el,s)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),s=t.project(e,this._tileZoom).floor(),r=t.getSize().divideBy(i*2);return new Y(s.subtract(r),s.add(r))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var i=this._getTiledPixelBounds(e),s=this._pxBoundsToTileRange(i),r=s.getCenter(),c=[],m=this.options.keepBuffer,x=new Y(s.getBottomLeft().subtract([m,-m]),s.getTopRight().add([m,-m]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var O=this._tiles[T].coords;(O.z!==this._tileZoom||!x.contains(new H(O.x,O.y)))&&(this._tiles[T].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(var Z=s.min.y;Z<=s.max.y;Z++)for(var W=s.min.x;W<=s.max.x;W++){var se=new H(W,Z);if(se.z=this._tileZoom,!!this._isValidTile(se)){var ie=this._tiles[this._tileCoordsToKey(se)];ie?ie.current=!0:c.push(se)}}if(c.sort(function(ce,Je){return ce.distanceTo(r)-Je.distanceTo(r)}),c.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _e=document.createDocumentFragment();for(W=0;W<c.length;W++)this._addTile(c[W],_e);this._level.el.appendChild(_e)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return ee(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),s=i.add(n),r=t.unproject(i,e.z),c=t.unproject(s,e.z);return[r,c]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new le(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new H(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(X(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){j(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=b,e.onmousemove=b,I.ielt9&&this.options.opacity<1&&fe(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),N(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&re(N(this._tileReady,this,e,null,s)),te(s,n),this._tiles[i]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);n=this._tiles[i],n&&(n.loaded=+new Date,this._map._fadeAnimated?(fe(n.el,0),me(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(j(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),I.ielt9||!this._map._fadeAnimated?re(this._pruneTiles,this):setTimeout(N(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new H(this._wrapX?f(e.x,this._wrapX):e.x,this._wrapY?f(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new Y(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Ss(e){return new ut(e)}var $e=ut.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=p(this,t),t.detectRetina&&I.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return F(n,"load",N(this._tileOnLoad,this,t,n)),F(n,"error",N(this._tileOnError,this,t,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:I.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return z(this._url,v(t,this.options))},_tileOnLoad:function(e,t){I.ielt9?setTimeout(N(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(e=t-e),e+i},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=b,t.onerror=b,!t.complete)){t.src=A;var n=this._tiles[e].coords;X(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",A),ut.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(!(!this._map||n&&n.getAttribute("src")===A))return ut.prototype._tileReady.call(this,e,t,n)}});function Si(e,t){return new $e(e,t)}var Ti=$e.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=v({},this.defaultWmsParams);for(var i in t)i in this.options||(n[i]=t[i]);t=p(this,t);var s=t.detectRetina&&I.retina?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,$e.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=oe(n.project(t[0]),n.project(t[1])),s=i.min,r=i.max,c=(this._wmsVersion>=1.3&&this._crs===xi?[s.y,s.x,r.y,r.x]:[s.x,s.y,r.x,r.y]).join(","),m=$e.prototype.getTileUrl.call(this,e);return m+k(this.wmsParams,m,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+c},setParams:function(e,t){return v(this.wmsParams,e),t||this.redraw(),this}});function Ts(e,t){return new Ti(e,t)}$e.WMS=Ti,Si.wms=Ts;var Ce=ye.extend({options:{padding:.1},initialize:function(e){p(this,e),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),j(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),r=i.multiplyBy(-n).add(s).subtract(this._map._getNewPixelOrigin(e,t));I.any3d?Oe(this._container,r,n):te(this._container,r)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new Y(n,n.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ci=Ce.extend({options:{tolerance:0},getEvents:function(){var e=Ce.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ce.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");F(e,"mousemove",this._onMouseMove,this),F(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),F(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){me(this._redrawRequest),delete this._ctx,X(this._container),J(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ce.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=I.retina?2:1;te(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",I.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Ce.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[h(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[h(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),n=[],i,s;for(s=0;s<t.length;s++){if(i=Number(t[s]),isNaN(i))return;n.push(i)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||re(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,s,r,c=e._parts,m=c.length,x=this._ctx;if(m){for(x.beginPath(),n=0;n<m;n++){for(i=0,s=c[n].length;i<s;i++)r=c[n][i],x[i?"lineTo":"moveTo"](r.x,r.y);t&&x.closePath()}this._fillStroke(x,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),s=(Math.max(Math.round(e._radiusY),1)||i)/i;s!==1&&(n.save(),n.scale(1,s)),n.beginPath(),n.arc(t.x,t.y/s,i,0,Math.PI*2,!1),s!==1&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),n,i,s=this._drawFirst;s;s=s.next)n=s.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(n))&&(i=n);this._fireEvent(i?[i]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Q(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)n=s.layer,n.options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(j(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(N(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;if(n)n.prev=i;else return;i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;if(i)i.next=n;else return;n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Mi(e){return I.canvas?new Ci(e):null}var ht=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Cs={_initContainer:function(){this._container=K("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ce.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=ht("shape");j(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=ht("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[h(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;X(t),e.removeInteractiveTarget(t),delete this._layers[h(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,s=e._container;s.stroked=!!i.stroke,s.filled=!!i.fill,i.stroke?(t||(t=e._stroke=ht("stroke")),s.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=B(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(s.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=ht("fill")),s.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(s.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){We(e._container)},_bringToBack:function(e){Ue(e._container)}},Bt=I.vml?ht:Bn,dt=Ce.extend({_initContainer:function(){this._container=Bt("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bt("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){X(this._container),J(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ce.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),te(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Bt("path");e.options.className&&j(t,e.options.className),e.options.interactive&&j(t,"leaflet-interactive"),this._updateStyle(e),this._layers[h(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){X(e._path),e.removeInteractiveTarget(e._path),delete this._layers[h(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,In(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i=Math.max(Math.round(e._radiusY),1)||n,s="a"+n+","+i+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+s+n*2+",0 "+s+-n*2+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){We(e._path)},_bringToBack:function(e){Ue(e._path)}});I.vml&&dt.include(Cs);function zi(e){return I.svg||I.vml?new dt(e):null}q.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Mi(e)||zi(e)}});var Ai=Ke.extend({initialize:function(e,t){Ke.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ee(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ms(e,t){return new Ai(e,t)}dt.create=Bt,dt.pointsToPath=In,Te.geometryToLayer=St,Te.coordsToLatLng=vn,Te.coordsToLatLngs=Tt,Te.latLngToCoords=yn,Te.latLngsToCoords=Ct,Te.getFeature=Ge,Te.asFeature=Mt,q.mergeOptions({boxZoom:!0});var Oi=Ee.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){F(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){X(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),it(),en(),this._startPoint=this._map.mouseEventToContainerPoint(e),F(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=K("div","leaflet-zoom-box",this._container),j(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new Y(this._point,this._startPoint),n=t.getSize();te(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(X(this._box),Q(this._container,"leaflet-crosshair")),at(),tn(),J(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(N(this._resetState,this),0);var t=new le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});q.addInitHook("addHandler","boxZoom",Oi),q.mergeOptions({doubleClickZoom:!0});var Bi=Ee.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,s=e.originalEvent.shiftKey?n-i:n+i;t.options.doubleClickZoom==="center"?t.setZoom(s):t.setZoomAround(e.containerPoint,s)}});q.addInitHook("addHandler","doubleClickZoom",Bi),q.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ii=Ee.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new ze(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}j(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Q(this._map._container,"leaflet-grab"),Q(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=ee(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,s=(i-t+n)%e+t-n,r=(i+t+n)%e-t-n,c=Math.abs(s+n)<Math.abs(r+n)?s:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=c},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,c=n.easeLinearity,m=s.multiplyBy(c/r),x=m.distanceTo([0,0]),T=Math.min(n.inertiaMaxSpeed,x),O=m.multiplyBy(T/x),Z=T/(n.inertiaDeceleration*c),W=O.multiplyBy(-Z/2).round();!W.x&&!W.y?t.fire("moveend"):(W=t._limitOffset(W,t.options.maxBounds),re(function(){t.panBy(W,{duration:Z,easeLinearity:c,noMoveStart:!0,animate:!0})}))}}});q.addInitHook("addHandler","dragging",Ii),q.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zi=Ee.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),F(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),J(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,i,s;for(i=0,s=n.left.length;i<s;i++)t[n.left[i]]=[-1*e,0];for(i=0,s=n.right.length;i<s;i++)t[n.right[i]]=[e,0];for(i=0,s=n.down.length;i<s;i++)t[n.down[i]]=[0,e];for(i=0,s=n.up.length;i<s;i++)t[n.up[i]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,i,s;for(i=0,s=n.zoomIn.length;i<s;i++)t[n.zoomIn[i]]=e;for(i=0,s=n.zoomOut.length;i<s;i++)t[n.zoomOut[i]]=-e},_addHooks:function(){F(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){J(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map,i;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(i=this._panKeys[t],e.shiftKey&&(i=R(i).multiplyBy(3)),n.options.maxBounds&&(i=n._limitOffset(R(i),n.options.maxBounds)),n.options.worldCopyJump){var s=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(i)));n.panTo(s)}else n.panBy(i)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;Ze(e)}}});q.addInitHook("addHandler","keyboard",Zi),q.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ri=Ee.extend({addHooks:function(){F(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=li(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(N(this._performZoom,this),i),Ze(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(this._map.options.wheelPxPerZoomLevel*4),s=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(s/n)*n:s,c=e._limitZoom(t+(this._delta>0?r:-r))-t;this._delta=0,this._startTime=null,c&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+c):e.setZoomAround(this._lastMousePos,t+c))}});q.addInitHook("addHandler","scrollWheelZoom",Ri);var zs=600;q.mergeOptions({tapHold:I.touchNative&&I.safari&&I.mobile,tapTolerance:15});var Di=Ee.extend({addHooks:function(){F(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new H(t.clientX,t.clientY),this._holdTimeout=setTimeout(N(function(){this._cancel(),this._isTapValid()&&(F(document,"touchend",ae),F(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),zs),F(document,"touchend touchcancel contextmenu",this._cancel,this),F(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){J(document,"touchend",ae),J(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new H(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});q.addInitHook("addHandler","tapHold",Di),q.mergeOptions({touchZoom:I.touch,bounceAtZoomLimits:!0});var Hi=Ee.extend({addHooks:function(){j(this._map._container,"leaflet-touch-zoom"),F(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Q(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),F(document,"touchmove",this._onTouchMove,this),F(document,"touchend touchcancel",this._onTouchEnd,this),ae(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,s===1)return}else{var r=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(s===1&&r.x===0&&r.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),me(this._animRequest);var c=N(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=re(c,this,!0),ae(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,me(this._animRequest),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});q.addInitHook("addHandler","touchZoom",Hi),q.BoxZoom=Oi,q.DoubleClickZoom=Bi,q.Drag=Ii,q.Keyboard=Zi,q.ScrollWheelZoom=Ri,q.TapHold=Di,q.TouchZoom=Hi,l.Bounds=Y,l.Browser=I,l.CRS=Pe,l.Canvas=Ci,l.Circle=gn,l.CircleMarker=Lt,l.Class=Ne,l.Control=ve,l.DivIcon=Li,l.DivOverlay=ke,l.DomEvent=Ja,l.DomUtil=Ga,l.Draggable=ze,l.Evented=Xe,l.FeatureGroup=Le,l.GeoJSON=Te,l.GridLayer=ut,l.Handler=Ee,l.Icon=Ve,l.ImageOverlay=zt,l.LatLng=$,l.LatLngBounds=le,l.Layer=ye,l.LayerGroup=qe,l.LineUtil=cs,l.Map=q,l.Marker=Pt,l.Mixin=is,l.Path=Ae,l.Point=H,l.PolyUtil=as,l.Polygon=Ke,l.Polyline=Se,l.Popup=At,l.PosAnimation=ci,l.Projection=us,l.Rectangle=Ai,l.Renderer=Ce,l.SVG=dt,l.SVGOverlay=Pi,l.TileLayer=$e,l.Tooltip=Ot,l.Transformation=jt,l.Util=_a,l.VideoOverlay=Ni,l.bind=N,l.bounds=oe,l.canvas=Mi,l.circle=vs,l.circleMarker=gs,l.control=ot,l.divIcon=Ls,l.extend=v,l.featureGroup=fs,l.geoJSON=ki,l.geoJson=xs,l.gridLayer=Ss,l.icon=ps,l.imageOverlay=ws,l.latLng=U,l.latLngBounds=ee,l.layerGroup=ms,l.map=Ya,l.marker=_s,l.point=R,l.polygon=bs,l.polyline=ys,l.popup=Ns,l.rectangle=Ms,l.setOptions=p,l.stamp=h,l.svg=zi,l.svgOverlay=ks,l.tileLayer=Si,l.tooltip=Ps,l.transformation=Qe,l.version=E,l.videoOverlay=Es;var As=window.L;l.noConflict=function(){return window.L=As,this},window.L=l})})(Tn,Tn.exports);var vo=Tn.exports;const Fe=js(vo),yo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",bo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",wo=Fe.icon({iconRetinaUrl:yo,iconUrl:bo,shadowUrl:xo,iconSize:[25,41],iconAnchor:[12,41]});Fe.Marker.prototype.options.icon=wo;function Eo({value:o,onChange:u}){const l=g.useRef(null),E=g.useRef(null),v=g.useRef(null);return g.useEffect(()=>{if(!v.current||l.current)return;const C=Fe.map(v.current).setView([(o==null?void 0:o.lat)??48.137,(o==null?void 0:o.lng)??11.575],13);return l.current=C,Fe.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap",maxZoom:19}).addTo(C),o!=null&&o.lat&&(o!=null&&o.lng)&&(E.current=Fe.marker([o.lat,o.lng]).addTo(C)),C.on("click",N=>{const M={lat:N.latlng.lat,lng:N.latlng.lng,desc:(o==null?void 0:o.desc)||""};E.current?E.current.setLatLng([M.lat,M.lng]):E.current=Fe.marker([M.lat,M.lng]).addTo(C),u&&u(M)}),()=>{C.off(),C.remove(),l.current=null,E.current=null}},[]),g.useEffect(()=>{l.current&&(o!=null&&o.lat)&&(o!=null&&o.lng)&&(E.current?E.current.setLatLng([o.lat,o.lng]):E.current=Fe.marker([o.lat,o.lng]).addTo(l.current),l.current.setView([o.lat,o.lng]))},[o]),a.createElement("div",{className:"space-y-2"},a.createElement("div",{ref:v,style:{height:"260px",width:"100%",borderRadius:12,overflow:"hidden"}}),a.createElement("input",{type:"text",placeholder:"Beschreibung (z. B. Eingang, Bank, Ladenname)‚Ä¶",defaultValue:(o==null?void 0:o.desc)||"",onChange:C=>u&&u({...o||{},desc:C.target.value}),className:"w-full px-3 py-2 rounded bg-zinc-800 border border-zinc-700 text-sm"}))}function ko(){const o=na(),u=o&&o.items?o.items:[],[l,E]=g.useState("cash"),[v,C]=g.useState(0),[N,M]=g.useState(null),[h,y]=g.useState(!1),f=d=>(Number(d||0)/100).toFixed(2)+" ‚Ç¨",b="totalCents"in(o||{})?Number(o.totalCents||0):Math.round(Number(o&&o.total||0)*100);g.useEffect(()=>{(async()=>{try{const d=typeof localStorage<"u"&&localStorage.getItem("token")||"",P=await fetch("/api/wallet/profile",{headers:d?{Authorization:"Bearer "+d}:{}});if(P.ok){const p=await P.json(),k=Number(p&&p.balance_cents!=null?p.balance_cents:Math.round(Number(p&&p.balance?p.balance:0)*100));C(isFinite(k)?k:0)}}catch{}})()},[]);async function w(){if(u.length){if(l==="wallet"&&v<b){alert("Guthaben reicht nicht aus.");return}y(!0);try{const d=typeof localStorage<"u"&&localStorage.getItem("token")||"",P={items:u.map(z=>({product_id:z.id,qty:Number(z.qty||1),grams:Number(z.grams||1)})),payment:l,pay_with_wallet:l==="wallet",meeting_point:N||null,mode:"pickup"},p=function(){const z={"content-type":"application/json"};let B="";try{const _=["token","jwt","authToken","plug_token","TOKEN","JWT"];for(const A of _){const G=typeof localStorage<"u"&&localStorage.getItem(A)||"";G&&G.length>B.length&&(B=G)}}catch{}return B&&(/^Bearer\s+/i.test(B)?z.Authorization=B:z.Authorization="Bearer "+B),z}(),k=await fetch("/api/orders",{headers:p,method:"POST",headers:p,body:JSON.stringify(P)});if(!k.ok){let z="HTTP "+k.status;try{const B=await k.json();B&&B.error&&(z=B.error)}catch{}throw new Error(z)}const S=await k.json();if(S&&S.order_id)try{localStorage.setItem("last_order_id",String(S.order_id))}catch{}o&&typeof o.clear=="function"&&o.clear(),location.hash="#/orders"}catch(d){console.error(d),alert("Bestellung fehlgeschlagen: "+(d&&d.message?d.message:String(d)))}finally{y(!1)}}}return a.createElement("div",{className:"max-w-2xl mx-auto px-3 py-4 space-y-4"},a.createElement("h1",{className:"text-xl font-semibold"},"Zur Kasse"),u.length===0?a.createElement("div",{className:"text-zinc-400"},"Dein Warenkorb ist leer."):a.createElement(a.Fragment,null,a.createElement("div",{className:"space-y-2"},u.map(d=>{const P=Number(d&&d.price_cents!=null?d.price_cents:Math.round(Number(d&&d.price?d.price:0)*100))||0,p=d&&(d.image||d.image_url)||null;return a.createElement("div",{key:d.id,className:"flex items-center gap-3 p-2 rounded-xl bg-zinc-900/60 border border-zinc-800"},p?a.createElement("img",{src:p,className:"w-12 h-12 rounded-md object-cover"}):null,a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"font-medium"},d.title||d.name||"#"+d.id),a.createElement("div",{className:"text-xs text-zinc-400"},f(P)," ¬∑ Menge",a.createElement("input",{type:"number",min:"1",value:d.qty||1,onChange:k=>o.setQty(d.id,Number(k.target.value)),className:"ml-2 w-16 px-2 py-0.5 rounded bg-zinc-800 border border-zinc-700 text-sm"}))),a.createElement("button",{onClick:()=>o.remove(d.id),className:"text-xs px-2 py-1 rounded bg-rose-700 hover:bg-rose-600"},"Entfernen"))})),a.createElement("div",{className:"p-3 rounded-xl bg-zinc-900/60 border border-zinc-800"},a.createElement("div",{className:"font-medium mb-2"},"Zahlungsart"),a.createElement("label",{className:"flex items-center gap-2 mb-1"},a.createElement("input",{type:"radio",name:"pay",checked:l==="wallet",onChange:()=>E("wallet")}),a.createElement("span",null,"Guthaben verwenden (",f(v),")")),a.createElement("label",{className:"flex items-center gap-2"},a.createElement("input",{type:"radio",name:"pay",checked:l==="cash",onChange:()=>E("cash")}),a.createElement("span",null,"Barzahlung")),l==="wallet"&&v<b?a.createElement("div",{className:"text-amber-400 text-sm mt-2"},"Hinweis: Guthaben reicht nicht fuer die Gesamtsumme."):null),a.createElement("div",{className:"p-3 rounded-xl bg-zinc-900/60 border border-zinc-800"},a.createElement("div",{className:"font-medium mb-2"},"Treffpunkt auswaehlen"),a.createElement(Eo,{value:N,onChange:M}),N?a.createElement("div",{className:"text-xs text-zinc-400 mt-2"},"Gewaehlt: ",N.lat&&N.lat.toFixed?N.lat.toFixed(5):N.lat,","," ",N.lng&&N.lng.toFixed?N.lng.toFixed(5):N.lng,N.desc?" - "+N.desc:""):null),a.createElement("div",{className:"flex items-center justify-between p-3 rounded-xl bg-zinc-900/60 border border-zinc-800"},a.createElement("div",null,"Zwischensumme"),a.createElement("div",{className:"font-semibold"},f(b))),a.createElement("button",{disabled:h||l==="wallet"&&v<b,onClick:w,className:"w-full px-4 py-3 rounded-2xl bg-emerald-600 hover:bg-emerald-500 border border-emerald-400 font-semibold disabled:opacity-60"},h?"Sende Bestellung...":"Bestellung abschliessen")))}async function De(o,u="GET",l){const E=await fetch(o,{method:u,headers:{"Content-Type":"application/json"},body:l?JSON.stringify(l):void 0});if(!E.ok)throw new Error(await E.text().catch(()=>E.statusText));try{return await E.json()}catch{return{}}}function No(){const[o,u]=g.useState(""),[l,E]=g.useState("accepted"),[v,C]=g.useState(""),[N,M]=g.useState({highlights:[],categoryFeatured:{}}),[h,y]=g.useState([]),[f,b]=g.useState("");g.useEffect(()=>{(async()=>{try{const S=await De("/api/ui");M(S)}catch{}try{const S=["/api/categories","/api/menu/categories","/api/catalog/categories","/api/admin/categories"];for(const z of S)try{const B=await De(z);y(B.categories||B);break}catch{}}catch{}})()},[]);async function w(S){b("");try{const z=await De("/api/admin/ui","POST",S);M(z),b("UI gespeichert.")}catch(z){b(String(z.message||z))}}function d(S){const z=S.id||S.category_id||S.slug||S.name,B={...N.categoryFeatured||{}};B[z]=!B[z],w({...N,categoryFeatured:B})}function P(){const S=prompt("Titel der Aktion:");if(!S)return;const z=prompt("Ziel-Link (optional):")||"#/menu",B=prompt("Bild-URL (optional):")||"",_=prompt("Untertitel (optional):")||"";w({...N,highlights:[...N.highlights||[],{title:S,href:z,image:B,subtitle:_}]})}function p(S){const z=[...N.highlights||[]];z.splice(S,1),w({...N,highlights:z})}async function k(){b("");const S={id:o,order_id:o,status:l,courier_id:v||void 0},z=[()=>De(`/api/admin/orders/${o}/status`,"POST",S),()=>De("/api/orders/status","POST",S),()=>De(`/api/orders/${o}/status`,"POST",S),()=>De("/api/admin/set-order-status","POST",S)];for(const B of z)try{await B(),b("OK - Bestellstatus aktualisiert.");return}catch{}b("Konnte Bestellstatus nicht setzen.")}return a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"p-4 rounded-2xl bg-zinc-900/60 border border-zinc-800 shadow-lg backdrop-blur"},a.createElement("div",{className:"font-medium mb-2"},"Bestell-Tools"),a.createElement("div",{className:"flex flex-wrap gap-2 items-center"},a.createElement("input",{value:o,onChange:S=>u(S.target.value),placeholder:"Order-ID",className:"px-3 py-2 rounded-xl rounded bg-zinc-800 border border-zinc-700 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"}),a.createElement("select",{value:l,onChange:S=>E(S.target.value),className:"px-3 py-2 rounded-xl rounded bg-zinc-800 border border-zinc-700 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"},a.createElement("option",{value:"accepted"},"akzeptiert"),a.createElement("option",{value:"in_progress"},"in arbeit"),a.createElement("option",{value:"en_route"},"unterwegs"),a.createElement("option",{value:"completed"},"abgeschlossen"),a.createElement("option",{value:"open"},"offen")),a.createElement("input",{value:v,onChange:S=>C(S.target.value),placeholder:"Kurier-ID (optional)",className:"px-3 py-2 rounded-xl rounded bg-zinc-800 border border-zinc-700 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"}),a.createElement("button",{onClick:k,className:"px-3 py-2 rounded-xl rounded bg-violet-600 hover:bg-violet-500 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"},"Setzen"))),a.createElement("div",{className:"p-4 rounded-2xl bg-zinc-900/60 border border-zinc-800 shadow-lg backdrop-blur"},a.createElement("div",{className:"flex items-center mb-2"},a.createElement("div",{className:"font-medium"},"Kategorien hervorheben"),a.createElement("button",{onClick:()=>location.reload(),className:"ml-auto text-xs px-2 py-1 rounded bg-zinc-700"},"Neu laden")),a.createElement("div",{className:"flex flex-wrap gap-2"},h.map(S=>{const z=S.id||S.category_id||S.slug||S.name,B=!!(N.categoryFeatured||{})[z];return a.createElement("button",{key:z,onClick:()=>d(S),className:"px-3 py-1.5 rounded-full border text-sm "+(B?"bg-amber-700/30 border-amber-600/40 text-amber-200":"bg-zinc-900 border-zinc-700 text-zinc-200")},S.name||S.title||S.slug)}))),a.createElement("div",{className:"p-4 rounded-2xl bg-zinc-900/60 border border-zinc-800 shadow-lg backdrop-blur"},a.createElement("div",{className:"flex items-center mb-2"},a.createElement("div",{className:"font-medium"},"Highlights & Aktionen"),a.createElement("button",{onClick:P,className:"ml-auto text-xs px-2 py-1 rounded bg-emerald-700 hover:bg-emerald-600"},"+ Highlight")),(N.highlights||[]).length===0?a.createElement("div",{className:"text-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"},"Keine Highlights vorhanden."):a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3"},(N.highlights||[]).map((S,z)=>a.createElement("div",{key:z,className:"rounded-xl overflow-hidden border border-zinc-800 bg-zinc-900/60"},S.image&&a.createElement("img",{src:S.image,className:"w-full h-24 object-cover"}),a.createElement("div",{className:"p-2"},a.createElement("div",{className:"font-medium text-sm focus:outline-none focus:ring-2 focus:ring-violet-500"},S.title),a.createElement("div",{className:"text-xs text-zinc-400"},S.subtitle||S.href)),a.createElement("button",{onClick:()=>p(z),className:"w-full text-xs py-1 bg-rose-700 hover:bg-rose-600"},"Entfernen")))),f&&a.createElement("div",{className:"mt-2 text-xs text-zinc-300"},f)))}function Po({title:o,subtitle:u=null,right:l=null}){return a.createElement("div",{className:"rounded-2xl p-4 border border-slate-800 bg-gradient-to-r from-emerald-600/10 via-cyan-600/10 to-fuchsia-600/10"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"text-xl font-extrabold"},o),l?a.createElement("div",{className:"ml-auto"},l):null),u?a.createElement("div",{className:"text-xs opacity-80 mt-1"},u):null)}const Ki=o=>(o||"").toString().toLowerCase().replace(/\s+/g,"_"),Lo=o=>typeof o=="number"?(o/100).toFixed(2)+" ‚Ç¨":"";async function ue(o,u,l,E){const C=await o(u,{method:l,headers:{"Content-Type":"application/json"},body:E?JSON.stringify(E):void 0}).catch(()=>null);return C&&C.ok}const So=({tab:o,setTab:u})=>{const l=({id:E,label:v,Icon:C})=>a.createElement("button",{onClick:()=>u(E),className:`px-3 py-2 rounded-2xl border text-sm flex items-center gap-2 transition
      ${o===E?"border-emerald-500 bg-emerald-500/15 shadow-[0_0_0_1px_rgba(16,185,129,.25)]":"border-slate-800 bg-slate-900/60 hover:bg-slate-900/80"}`},a.createElement(C,{size:14})," ",a.createElement("span",null,v));return a.createElement("div",{className:"flex flex-wrap gap-2"},a.createElement(No,null),a.createElement(l,{id:"orders",label:"Bestellungen",Icon:Ht}),a.createElement(l,{id:"products",label:"Produkte",Icon:Mn}),a.createElement(l,{id:"categories",label:"Kategorien",Icon:Cn}),a.createElement(l,{id:"users",label:"Nutzer",Icon:fa}),a.createElement(l,{id:"tools",label:"Tools",Icon:co}))};function To(){const{fetchWithAuth:o}=ge(),[u,l]=g.useState([]),[E,v]=g.useState(""),[C,N]=g.useState(null),[M,h]=g.useState(!0);async function y(){h(!0);try{const d=await o("/api/admin/orders").then(P=>P.json());l((d==null?void 0:d.orders)||[])}catch{l([])}h(!1)}g.useEffect(()=>{y()},[]);const f=g.useMemo(()=>{const d=E.trim().toLowerCase();return u.filter(P=>!d||String(P.id).includes(d)||String(P.customer_name||"").toLowerCase().includes(d)||String(P.address||"").toLowerCase().includes(d))},[u,E]);async function b(d,P){return ue(o,d,"POST",P)}const w=({o:d})=>{const P=d.courier_id??d.assigned_courier_id??null;return a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 overflow-hidden"},a.createElement("button",{className:"w-full p-3 flex items-center gap-3",onClick:()=>N(C===d.id?null:d.id)},a.createElement("div",{className:"w-10 h-10 rounded-xl bg-slate-800/60 grid place-items-center"},a.createElement(Ht,{size:18})),a.createElement("div",{className:"text-left"},a.createElement("div",{className:"font-semibold"},"#",d.id," ‚Ä¢ ",Lo(d.total_cents)),a.createElement("div",{className:"text-xs opacity-70"},d.created_at?new Date(d.created_at).toLocaleString():"")),a.createElement("div",{className:"ml-auto text-xs opacity-70 capitalize"},Ki(d.status).replace("_"," ")),a.createElement(oa,{size:16,className:`ml-2 transition ${C===d.id?"rotate-90":""}`})),C===d.id&&a.createElement("div",{className:"p-3 pt-0 space-y-3"},a.createElement("div",{className:"flex flex-wrap gap-2"},["offen","akzeptiert","in_arbeit","unterwegs","abgeschlossen"].map(p=>a.createElement("button",{key:p,onClick:async()=>{await b(`/api/admin/orders/${d.id}/status`,{status:p})&&y()},className:`px-3 py-1 rounded-xl border ${Ki(d.status)===p?"border-emerald-500 bg-emerald-500/20":"border-slate-700 bg-slate-800/50"}`},p.replace("_"," ")))),a.createElement("div",{className:"flex flex-wrap items-center gap-2"},a.createElement(ir,{size:14,className:"opacity-70"}),a.createElement("input",{type:"datetime-local",className:"px-3 py-2 rounded-xl bg-slate-950 border border-slate-700 text-sm",onChange:async p=>{const k=new Date(p.target.value).toISOString();await b(`/api/admin/orders/${d.id}/eta`,{eta_at:k})&&y()}})),a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Ht,{size:14,className:"opacity-70"}),a.createElement("input",{type:"number",placeholder:"Kurier-ID",defaultValue:P||"",onKeyDown:async p=>{if(p.key==="Enter"){const k=parseInt(p.currentTarget.value||"0",10)||null;await b(`/api/admin/orders/${d.id}/assign`,{courier_id:k})&&y()}},className:"px-3 py-2 rounded-xl bg-slate-950 border border-slate-700 text-sm"}),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-1"},a.createElement(sa,{size:14})," Enter")),a.createElement("div",{className:"pt-2"},a.createElement("button",{className:"btn-ghost text-rose-300 inline-flex items-center gap-2",onClick:async()=>{confirm("Bestellung l√∂schen?")&&await b(`/api/admin/orders/${d.id}/delete`)&&y()}},a.createElement(ma,{size:16})," L√∂schen"))))};return a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"relative flex-1"},a.createElement(Rr,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60"}),a.createElement("input",{value:E,onChange:d=>v(d.target.value),placeholder:"Suche (ID, Kunde, Adresse)‚Ä¶",className:"w-full pl-9 pr-3 py-2 rounded-xl bg-slate-950 border border-slate-800 text-sm"})),a.createElement("button",{className:"btn-ghost border border-slate-700",onClick:y},"Neu laden")),M&&a.createElement("div",{className:"rounded-xl h-12 bg-slate-800/50 animate-pulse"}),!M&&f.length===0&&a.createElement("div",{className:"text-xs opacity-70"},"Keine Bestellungen."),f.map(d=>a.createElement(w,{key:d.id,o:d})))}function zn({title:o,items:u,icon:l,imageKey:E,fields:v,onCreate:C,onUpdate:N,onDelete:M}){const[h,y]=g.useState(!1),[f,b]=g.useState({});return a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"text-sm font-semibold opacity-80"},o," ",a.createElement("span",{className:"ml-1 text-xs opacity-60"},"(",(u==null?void 0:u.length)||0,")")),a.createElement("button",{className:"btn inline-flex items-center gap-2",onClick:()=>{b({}),y(!0)}},a.createElement(Tr,{size:16})," Neu")),h&&a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-3 space-y-2"},a.createElement("div",{className:"text-xs opacity-80"},"Neu erstellen"),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},v.map(w=>a.createElement("input",{key:w.key,placeholder:w.label,value:f[w.key]??"",onChange:d=>b({...f,[w.key]:d.target.value}),className:"px-3 py-2 rounded-xl bg-slate-950 border border-slate-700 text-sm"}))),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{className:"btn",onClick:()=>C(f).then(w=>w&&y(!1))},a.createElement(ha,{size:16})," Speichern"),a.createElement("button",{className:"btn-ghost",onClick:()=>y(!1)},"Abbrechen"))),!u||u.length===0?a.createElement("div",{className:"text-xs opacity-70"},"Keine Daten."):a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2"},u.map(w=>a.createElement(Co,{key:w.id,it:w,icon:l,imageKey:E,fields:v,onUpdate:N,onDelete:M}))))}function Co({it:o,icon:u,imageKey:l,fields:E,onUpdate:v,onDelete:C}){const[N,M]=g.useState(!1),[h,y]=g.useState(o);return a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-3"},a.createElement("div",{className:"flex items-center gap-3"},l?o[l]?a.createElement("img",{src:o[l],alt:"",className:"w-12 h-12 rounded-xl object-cover"}):a.createElement("div",{className:"w-12 h-12 rounded-xl bg-slate-800"}):a.createElement("div",{className:"w-12 h-12 rounded-xl bg-slate-800 grid place-items-center"},a.createElement(u,{size:16})),a.createElement("div",{className:"font-semibold truncate flex-1"},o.name||o.username||"#"+o.id),N?null:a.createElement("div",{className:"flex gap-2"},a.createElement("button",{className:"btn-ghost inline-flex items-center gap-1",onClick:()=>M(!0)},a.createElement(Nr,{size:16})," Bearb."),a.createElement("button",{className:"btn-ghost text-rose-300 inline-flex items-center gap-1",onClick:()=>{confirm("Eintrag l√∂schen?")&&C(o.id)}},a.createElement(ma,{size:16})," L√∂schen"))),N&&a.createElement("div",{className:"mt-3 space-y-2"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},E.map(f=>a.createElement("input",{key:f.key,placeholder:f.label,value:h[f.key]??"",onChange:b=>y({...h,[f.key]:b.target.value}),className:"px-3 py-2 rounded-xl bg-slate-950 border border-slate-700 text-sm"}))),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2",onClick:()=>v(o.id,h).then(f=>f&&M(!1))},a.createElement(ha,{size:16})," Speichern"),a.createElement("button",{className:"btn-ghost",onClick:()=>{y(o),M(!1)}},"Abbrechen"))))}function Mo(){const{fetchWithAuth:o}=ge(),[u,l]=g.useState([]);async function E(){try{const h=await fetch("/api/products").then(y=>y.json()).catch(()=>({}));if(Array.isArray(h==null?void 0:h.products))l(h.products);else{const y=await o("/api/admin/products").then(f=>f.json());l((y==null?void 0:y.products)||[])}}catch{l([])}}g.useEffect(()=>{E()},[]);const v=[{key:"name",label:"Name"},{key:"price_cents",label:"Preis (cents)"},{key:"sale_price_cents",label:"Sale-Preis (cents)"},{key:"category_id",label:"Kategorie-ID"},{key:"highlight_title",label:"Highlight Titel"},{key:"badge_text",label:"Badge Text"},{key:"badge_color",label:"Badge Farbe (hex)"},{key:"image_url",label:"Bild URL"},{key:"banner_image_url",label:"Banner URL"}],C=async h=>await ue(o,"/api/admin/products","POST",h).then(y=>(y&&E(),y)),N=async(h,y)=>{const f=await ue(o,`/api/admin/products/${h}`,"PUT",y)||await ue(o,`/api/admin/products/${h}`,"PATCH",y);return f&&E(),f},M=async h=>{const y=await ue(o,`/api/admin/products/${h}`,"DELETE");return y&&E(),y};return a.createElement(zn,{title:"Produkte",items:u,icon:Mn,imageKey:"image_url",fields:v,onCreate:C,onUpdate:N,onDelete:M})}function zo(){const{fetchWithAuth:o}=ge(),[u,l]=g.useState([]);async function E(){try{const y=await o("/api/admin/categories").then(f=>f.json());l((y==null?void 0:y.categories)||[])}catch{l([])}}g.useEffect(()=>{E()},[]);const v=[{key:"name",label:"Name"},{key:"highlight_title",label:"Highlight Titel"},{key:"badge_text",label:"Badge Text"},{key:"badge_color",label:"Badge Farbe (hex)"},{key:"is_featured",label:"Featured (true/false)"}],C=y=>String(y).toLowerCase()==="true"?!0:String(y).toLowerCase()==="false"?!1:y,N=async y=>{y.is_featured=C(y.is_featured);const f=await ue(o,"/api/admin/categories","POST",y);return f&&E(),f},M=async(y,f)=>{f.is_featured=C(f.is_featured);const b=await ue(o,`/api/admin/categories/${y}`,"PUT",f)||await ue(o,`/api/admin/categories/${y}`,"PATCH",f);return b&&E(),b},h=async y=>{const f=await ue(o,`/api/admin/categories/${y}`,"DELETE");return f&&E(),f};return a.createElement(zn,{title:"Kategorien",items:u,icon:Cn,fields:v,onCreate:N,onUpdate:M,onDelete:h})}function Ao(){const{fetchWithAuth:o}=ge(),[u,l]=g.useState([]);async function E(){try{const h=await o("/api/admin/users").then(y=>y.json());l((h==null?void 0:h.users)||[])}catch{l([])}}g.useEffect(()=>{E()},[]);const v=[{key:"username",label:"Username"},{key:"role",label:"Rolle (admin/courier/user)"},{key:"password",label:"Passwort"}],C=async h=>await ue(o,"/api/admin/users","POST",h).then(y=>(y&&E(),y)),N=async(h,y)=>{const f=await ue(o,`/api/admin/users/${h}`,"PUT",y)||await ue(o,`/api/admin/users/${h}`,"PATCH",y);return f&&E(),f},M=async h=>{const y=await ue(o,`/api/admin/users/${h}`,"DELETE");return y&&E(),y};return a.createElement(zn,{title:"Nutzer",items:u,icon:fa,fields:v,onCreate:C,onUpdate:N,onDelete:M})}function Oo(){const{fetchWithAuth:o}=ge(),[u,l]=g.useState(""),[E,v]=g.useState("akzeptiert"),C=["offen","akzeptiert","in_arbeit","unterwegs","abgeschlossen"];async function N(){const M=parseInt(u,10);if(!M)return alert("Order-ID?");const h=await ue(o,`/api/admin/orders/${M}/status`,"POST",{status:E});alert(h?"Status gesetzt.":"Fehler beim Setzen.")}return a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4 w-full max-w-md"},a.createElement("div",{className:"font-semibold mb-3"},"Bestellstatus setzen"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{value:u,onChange:M=>l(M.target.value),placeholder:"Order-ID",className:"flex-1 px-3 py-2 rounded-xl bg-slate-950 border border-slate-800 text-sm"}),a.createElement("select",{value:E,onChange:M=>v(M.target.value),className:"px-3 py-2 rounded-xl bg-slate-950 border border-slate-800 text-sm"},C.map(M=>a.createElement("option",{key:M,value:M},M.replace("_"," ")))),a.createElement("button",{className:"btn",onClick:N},"Setzen")))}function Bo(){const[o,u]=g.useState("orders");return a.createElement("div",{className:"pf-pt-safe pf-pb-safe"},a.createElement(Po,{title:"Admin",subtitle:"Verwaltung von Bestellungen, Produkten, Kategorien und Nutzern"}),a.createElement("div",{className:"max-w-screen-lg mx-auto p-3 space-y-4"},a.createElement(So,{tab:o,setTab:u}),o==="orders"&&a.createElement(To,null),o==="products"&&a.createElement(Mo,null),o==="categories"&&a.createElement(zo,null),o==="users"&&a.createElement(Ao,null),o==="tools"&&a.createElement(Oo,null)))}const Io=o=>(Number(o||0)/100).toFixed(2)+" ‚Ç¨";function Zo(){const[o,u]=g.useState([]),[l,E]=g.useState(!0),[v,C]=g.useState(""),N=g.useRef(!1);async function M(){if(!N.current){N.current=!0,E(!0),C("");try{const h=await fetch("/api/orders?ts="+Date.now(),{headers:{accept:"application/json","cache-control":"no-cache"}});if(!h.ok)throw new Error("HTTP_"+h.status);const y=await h.json();u(Array.isArray(y.orders)?y.orders:[])}catch(h){C(String(h.message||h)),u([])}finally{E(!1)}}}return g.useEffect(()=>{M()},[]),a.createElement("div",{className:"max-w-6xl mx-auto p-4"},a.createElement("h1",{className:"text-xl font-semibold mb-4"},"Kurier"),v&&a.createElement("div",{className:"mb-3 text-sm text-rose-400"},"Fehler: ",v),l?a.createElement("div",{className:"text-zinc-400"},"Lade Bestellungen‚Ä¶"):o.length===0?a.createElement("div",{className:"text-zinc-400"},"Keine Bestellungen vorhanden."):a.createElement("div",{className:"grid gap-3"},o.map(h=>a.createElement("div",{key:h.id,className:`rounded-xl border p-3 ${String(h.status||"").toLowerCase().includes("wartet")?"card-open bg-zinc-900/70 border-emerald-400/40":"bg-zinc-900/60 border-zinc-800"}`},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"font-semibold"},"Order #",h.id),a.createElement("div",{className:"text-sm text-zinc-400"},(h.created_at||"").toString().replace("T"," ").replace("Z",""))),a.createElement("div",{className:"text-sm text-zinc-300 mt-1"},"Status: ",a.createElement("span",{className:"font-medium"},h.status||"?")," ¬∑ Summe: ",a.createElement("span",{className:"font-medium"},Io(h.total_cents||0))," ¬∑ Zahlung: ",a.createElement("span",{className:"font-medium"},h.payment_method||"-")),Array.isArray(h.items)&&h.items.length?a.createElement("div",{className:"mt-2 text-sm text-zinc-400"},h.items.slice(0,8).map((y,f)=>a.createElement("span",{key:f,className:"inline-block mr-2"},"#",y.product_id," √ó ",y.qty)),h.items.length>8?a.createElement("span",null,"‚Ä¶"):null):null))))}function Ro({me:o,msg:u}){return a.createElement("div",{className:`flex ${o?"justify-end":"justify-start"}`},a.createElement("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm leading-snug ${o?"bg-emerald-600 text-white":"bg-slate-800 text-slate-50"}`},a.createElement("div",{className:"opacity-80 text-[11px] mb-0.5"},u.sender),a.createElement("div",null,u.text),a.createElement("div",{className:"opacity-50 text-[10px] mt-1"},(u.created_at||"").replace("T"," ").slice(0,16))))}function Gi(){var B;const{fetchWithAuth:o,user:u}=ge(),[l,E]=g.useState([]),[v,C]=g.useState(null),[N,M]=g.useState([]),[h,y]=g.useState(""),[f,b]=g.useState(null),w=g.useRef(null);async function d(){const _=await o("/api/chat/my");if(!_.ok)return;const A=await _.json();E(A.conversations||[]);const G=new URL(location.href).hash,V=G.includes("id=")&&Number(G.split("id=")[1])||null;if(V&&!v){const de=(A.conversations||[]).find(be=>be.id===V);de&&P(de)}}async function P(_){C(_),b(null);const A=await o(`/api/chat/${_.id}/messages`);if(!A.ok)return;const G=await A.json();M(G.messages||[]),setTimeout(()=>{var V;(V=w.current)==null||V.scrollTo({top:9e6,behavior:"smooth"})},80)}async function p(){const _=h.trim();!_||!v||(y(""),await o(`/api/chat/${v.id}/message`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({text:_})}),P(v))}async function k(){if(!(v!=null&&v.order_id))return;const _=await o(`/api/chat/order/${v.order_id}`);if(!_.ok)return;const A=await _.json();b(A)}async function S(){(await o("/api/chat/start/admin",{method:"POST"})).ok&&await d()}async function z(){const _=prompt("Kunden-Benutzername:");if(!_)return;(await o("/api/chat/start/with",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:_})})).ok&&await d()}return g.useEffect(()=>{d();const _=setInterval(d,4e3);return()=>clearInterval(_)},[]),a.createElement("div",{className:"mx-auto max-w-screen-md pb-28"},a.createElement("div",{className:"sticky top-0 z-20 backdrop-blur bg-slate-950/80 border-b border-slate-800 px-4 py-3 flex items-center gap-2"},a.createElement("div",{className:"font-extrabold"},"Chat"),a.createElement("div",{className:"ml-auto flex gap-2"},a.createElement("button",{className:"inline-flex items-center gap-2 text-sm rounded-xl border border-slate-700 bg-slate-800 px-3 py-1.5",onClick:d},a.createElement(Ar,{size:16})," Aktualisieren"),(u==null?void 0:u.role)==="user"&&a.createElement("button",{className:"inline-flex items-center gap-2 text-sm rounded-xl border border-emerald-600 bg-emerald-500/20 px-3 py-1.5",onClick:S},a.createElement(br,{size:16})," Admin anschreiben"),((u==null?void 0:u.role)==="admin"||(u==null?void 0:u.role)==="courier")&&a.createElement("button",{className:"inline-flex items-center gap-2 text-sm rounded-xl border border-slate-700 bg-slate-800 px-3 py-1.5",onClick:z},a.createElement(to,{size:16})," Kunde anschreiben"))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3"},a.createElement("div",{className:"md:col-span-1 rounded-2xl border border-slate-800 bg-slate-900"},a.createElement("div",{className:"p-2 text-xs text-slate-400"},"Unterhaltungen"),a.createElement("div",{className:"divide-y divide-slate-800"},l.map(_=>a.createElement("button",{key:_.id,onClick:()=>P(_),className:`w-full text-left px-3 py-2 hover:bg-slate-800 ${(v==null?void 0:v.id)===_.id?"bg-slate-800":""}`},a.createElement("div",{className:"text-sm font-semibold truncate"},_.title||(_.type==="order"?`Bestellung #${_.order_id}`:"Direkt")),a.createElement("div",{className:"text-xs text-slate-400 truncate"},_.last_message||"-"))),l.length===0&&a.createElement("div",{className:"px-3 py-6 text-sm text-slate-500"},"Keine Chats."))),a.createElement("div",{className:"md:col-span-2 rounded-2xl border border-slate-800 bg-slate-900 flex flex-col h-[70vh]"},(v==null?void 0:v.order_id)&&a.createElement("div",{className:"m-3 rounded-xl border border-emerald-700/50 bg-emerald-900/20 p-2 text-xs"},a.createElement("button",{className:"inline-flex items-center gap-2",onClick:k},a.createElement(Cn,{size:14})," Bestellung #",v.order_id," √∂ffnen"),f&&((B=f==null?void 0:f.order)==null?void 0:B.id)===v.order_id&&a.createElement("div",{className:"mt-2 grid grid-cols-1 gap-1"},f.items.map((_,A)=>a.createElement("div",{key:A,className:"flex justify-between gap-2"},a.createElement("div",{className:"truncate"},_.name," ",_.grams?`(${_.grams}g)`:""),a.createElement("div",{className:"text-slate-300"},(_.price_cents*_.qty/100).toFixed(2)," ‚Ç¨"))),a.createElement("div",{className:"mt-1 text-right font-semibold"},"Summe: ",(f.order.total_cents/100).toFixed(2)," ‚Ç¨"))),a.createElement("div",{ref:w,className:"flex-1 overflow-y-auto px-3 py-2 space-y-2"},N.map(_=>a.createElement(Ro,{key:_.id,me:_.sender===(u==null?void 0:u.username),msg:_})),N.length===0&&a.createElement("div",{className:"text-sm text-slate-500 px-2"},"Noch keine Nachrichten.")),a.createElement("div",{className:"p-2 border-t border-slate-800 flex gap-2"},a.createElement("input",{className:"flex-1 rounded-xl bg-slate-950 border border-slate-700 px-3 py-2 text-sm",placeholder:"Nachricht schreiben‚Ä¶",value:h,onChange:_=>y(_.target.value),onKeyDown:_=>{_.key==="Enter"&&p()}}),a.createElement("button",{className:"rounded-xl border border-emerald-600 bg-emerald-500/20 px-3 py-2",onClick:p},a.createElement(da,{size:16}))))))}const ft=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26],Zt=o=>o===0?"green":[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(o)?"red":"black";function Do(){const[o,u]=g.useState(1e3),[l,E]=g.useState(100),[v,C]=g.useState("red"),[N,M]=g.useState(!1),[h,y]=g.useState(null),f=g.useRef(null),b=360/ft.length,w=g.useMemo(()=>{let P=[];for(let p=0;p<ft.length;p++){const k=ft[p],S=Zt(k),z=p*b,B=(p+1)*b,_=S==="red"?"#ef4444":S==="black"?"#111827":"#10b981";P.push(`${_} ${z}deg ${B}deg`)}return`conic-gradient(${P.join(",")})`},[b]);function d(){if(N||l<=0||o<l)return;M(!0),y(null),u(z=>z-l);const P=Math.floor(Math.random()*ft.length),p=ft[P],k=360*8+(360-(P*b+b/2)),S=f.current;S?(S.style.transition="transform 4s cubic-bezier(.15,.8,.25,1)",S.style.transform="rotate(0deg)",setTimeout(()=>{S.style.transform=`rotate(${k}deg)`},30),setTimeout(()=>{M(!1),y({num:p,color:Zt(p)}),v==="green"&&p===0?u(z=>z+l*14):v==="red"&&Zt(p)==="red"?u(z=>z+l*2):v==="black"&&Zt(p)==="black"&&u(z=>z+l*2)},4100)):M(!1)}return a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-4"},a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4"},a.createElement("div",{className:"relative mx-auto w-[320px] h-[320px]"},a.createElement("div",{ref:f,className:"absolute inset-0 rounded-full",style:{background:w,boxShadow:"inset 0 0 40px rgba(0,0,0,.5)"}}),a.createElement("div",{className:"absolute inset-3 rounded-full border border-slate-900/70"}),a.createElement("div",{className:"absolute left-1/2 -translate-x-1/2 -top-2 w-0 h-0 border-l-[10px] border-r-[10px] border-b-[18px] border-l-transparent border-r-transparent border-b-emerald-400 drop-shadow"})),a.createElement("div",{className:"mt-3 text-center text-sm opacity-80"},"Demo-Roulette ‚Ä¢ europ√§isches Rad")),a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-sm font-semibold"},"Einsatz & Auswahl"),a.createElement("div",{className:"px-3 py-1 rounded-full bg-slate-800/70 text-xs"},"Guthaben: ",(o/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2"},a.createElement("button",{onClick:()=>C("red"),className:`p-3 rounded-xl border transition active:scale-[0.99] ${v==="red"?"border-red-500 bg-red-500/20":"border-slate-700 bg-slate-800/60"}`},"üî¥ Rot"),a.createElement("button",{onClick:()=>C("black"),className:`p-3 rounded-xl border transition active:scale-[0.99] ${v==="black"?"border-slate-400 bg-slate-300/10":"border-slate-700 bg-slate-800/60"}`},"‚ö´ Schwarz"),a.createElement("button",{onClick:()=>C("green"),className:`p-3 rounded-xl border transition active:scale-[0.99] ${v==="green"?"border-emerald-500 bg-emerald-500/20":"border-slate-700 bg-slate-800/60"}`},"üü¢ Gr√ºn (0)")),a.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},[50,100,200].map(P=>a.createElement("button",{key:P,onClick:()=>E(P),className:`rounded-xl px-3 py-2 border ${l===P?"border-emerald-500 bg-emerald-500/20":"border-slate-700 bg-slate-800/60"}`},(P/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"col-span-3"},a.createElement("input",{type:"number",min:"10",step:"10",value:l,onChange:P=>E(Math.max(10,parseInt(P.target.value||0))),className:"w-full mt-1 px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"}))),a.createElement("div",{className:"mt-4 flex items-center gap-2"},a.createElement("button",{onClick:d,disabled:N||o<l,className:"btn inline-flex items-center gap-2 disabled:opacity-50"},a.createElement(la,{size:16})," Drehen"),a.createElement("button",{onClick:()=>y(null),className:"btn-ghost inline-flex items-center gap-2"},a.createElement(_t,{size:16})," Reset")),a.createElement("div",{className:"mt-3 min-h-[48px]"},h&&a.createElement("div",{className:"p-3 rounded-xl border border-slate-700 bg-slate-800/60 animate-in fade-in"},a.createElement("div",{className:"text-sm"},"Ergebnis: ",a.createElement("b",null,h.num)," - ",h.color==="red"?"Rot":h.color==="black"?"Schwarz":"Gr√ºn")))))}const $i=.015,Ho=["‚ô†","‚ô•","‚ô¶","‚ô£"],Fo=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];function Ji(){const o=[];for(const u of Ho)for(const l of Fo)o.push({s:u,v:l});for(let u=o.length-1;u>0;u--){const l=Math.floor(Math.random()*(u+1));[o[u],o[l]]=[o[l],o[u]]}return o}const jo=o=>o==="A"?11:["K","Q","J"].includes(o)?10:parseInt(o,10);function He(o){let u=0,l=0;for(const E of o)u+=jo(E.v),E.v==="A"&&l++;for(;u>21&&l>0;)u-=10,l--;return u}const Yi=o=>o.length===2&&He(o)===21;function Xi({c:o,delay:u=0}){const l=o.s==="‚ô•"||o.s==="‚ô¶";return a.createElement("div",{className:`w-16 h-24 rounded-xl border border-slate-700 bg-white text-slate-900 shadow-md
                    grid place-items-center font-semibold select-none`,style:{animation:"flip-in 300ms ease both",animationDelay:`${u}ms`,color:l?"#ef4444":"#111827"}},a.createElement("div",{className:"text-xl leading-none"},o.v),a.createElement("div",{className:"text-lg leading-none"},o.s),a.createElement("style",null,`
        @keyframes flip-in { from{ transform: rotateY(90deg); opacity:.0 } to{ transform: rotateY(0) opacity:1 } }
      `))}function Wo(){const[o,u]=g.useState(5e3),[l,E]=g.useState(200),[v,C]=g.useState(()=>Ji()),[N,M]=g.useState([]),[h,y]=g.useState([]),[f,b]=g.useState(!1),[w,d]=g.useState(!1),[P,p]=g.useState("");function k(_=!1){_&&u(5e3),C(Ji()),M([]),y([]),b(!1),d(!1),p("")}function S(){if(h.length)return;if(l<=0||o<l){alert("Nicht genug Guthaben / Einsatz fehlt.");return}u(V=>V-l);const _=[...v],A=[],G=[];A.push(_.pop()),G.push(_.pop()),A.push(_.pop()),G.push(_.pop()),C(_),y(A),M(G)}function z(){if(w||!h.length||f)return;const _=[...v],A=[...h];A.push(_.pop()),C(_),y(A),He(A)>21&&(d(!0),p("Bust - Dealer gewinnt üòµ"))}function B(){if(w||!h.length)return;b(!0);let _=[...v],A=[...N];for(;He(A)<17;)A.push(_.pop());C(_),M(A);const G=He(h),V=He(A);if(V>21||G>V){const de=Math.floor(l*(Yi(h)?1.5:1)*(1-$i));u(be=>be+l+de),p(Yi(h)?"Blackjack! üéâ 3:2 (mit kleinem Hausvorteil)":"Du gewinnst üéâ")}else G<V?p("Dealer gewinnt üò¨"):(u(de=>de+l),p("Push ü§ù"));d(!0)}return g.useEffect(()=>{!h.length&&N.length},[]),a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-gradient-to-b from-emerald-600/10 to-slate-900/60 p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-sm font-semibold"},"Blackjack (Demo) ‚Ä¢ Hausvorteil ",Math.round($i*1e3)/10,"%"),a.createElement("div",{className:"px-3 py-1 rounded-full bg-slate-800/70 text-xs"},"Guthaben: ",(o/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("div",{className:"text-sm font-semibold mb-2"},"Dealer"),a.createElement("div",{className:"flex gap-2 flex-wrap"},N.map((_,A)=>a.createElement(Xi,{key:A,c:_,delay:A*120}))),a.createElement("div",{className:"mt-1 text-xs opacity-80"},"Punkte: ",He(N))),a.createElement("div",null,a.createElement("div",{className:"text-sm font-semibold mb-2"},"Du"),a.createElement("div",{className:"flex gap-2 flex-wrap"},h.map((_,A)=>a.createElement(Xi,{key:A,c:_,delay:A*120}))),a.createElement("div",{className:"mt-1 text-xs opacity-80"},"Punkte: ",He(h)))),a.createElement("div",{className:"mt-4 rounded-xl border border-slate-800 bg-slate-900/60 p-3"},a.createElement("div",{className:"text-sm font-semibold mb-2 flex items-center gap-2"},a.createElement(Dt,{size:16})," Einsatz"),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-6 gap-2"},[100,200,500,1e3,2e3,5e3].map(_=>a.createElement("button",{key:_,onClick:()=>E(_),className:`rounded-xl px-3 py-2 border ${l===_?"border-emerald-500 bg-emerald-500/20":"border-slate-700 bg-slate-800/60"}`},(_/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"col-span-2 sm:col-span-6"},a.createElement("input",{type:"number",min:"50",step:"50",value:l,onChange:_=>E(Math.max(50,parseInt(_.target.value||0))),className:"w-full mt-1 px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"})))),a.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2",onClick:S,disabled:!!h.length||o<l},a.createElement(Lr,{size:16})," Geben"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:z,disabled:w||!h.length||f},a.createElement(dr,{size:16})," Hit"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:B,disabled:w||!h.length||f},a.createElement(Gr,{size:16})," Stand"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:()=>k(!1)},a.createElement(_t,{size:16})," Neu (gleiches Guthaben)")),P&&a.createElement("div",{className:"mt-3 p-3 rounded-xl border border-slate-700 bg-slate-800/60 animate-in fade-in"},P))}const kn=.015;function Nn(){const o=Math.random();return o<.72?1.3+Math.random()*1.8:o<.92?3.1+Math.random()*2.2:5.3+Math.random()*4.7}function Uo(){const[o,u]=g.useState(5e3),[l,E]=g.useState(200),[v,C]=g.useState(.7),[N,M]=g.useState(()=>Nn()),[h,y]=g.useState(!1),[f,b]=g.useState(!1),[w,d]=g.useState(!1),P=g.useRef(0),p=g.useRef(0);g.useEffect(()=>()=>cancelAnimationFrame(P.current||0),[]);function k(_){p.current||(p.current=_);const A=(_-p.current)/1e3,G=.7*Math.pow(1.02,A*20);C(G),G>=N?(y(!1),b(!0),cancelAnimationFrame(P.current||0)):P.current=requestAnimationFrame(k)}function S(){h||l<=0||o<l||(u(_=>_-l),d(!1),b(!1),M(Nn()),C(.7),y(!0),p.current=0,P.current=requestAnimationFrame(k))}function z(){if(!h||w)return;const _=Math.floor(l*v*(1-kn));u(A=>A+_),d(!0),y(!1),cancelAnimationFrame(P.current||0)}function B(){C(.7),M(Nn()),y(!1),b(!1),d(!1),cancelAnimationFrame(P.current||0)}return a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-gradient-to-b from-cyan-600/10 to-slate-900/60 p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-sm font-semibold"},"Crash (Demo) ‚Ä¢ Hausvorteil ",Math.round(kn*1e3)/10,"%"),a.createElement("div",{className:"px-3 py-1 rounded-full bg-slate-800/70 text-xs"},"Guthaben: ",(o/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"relative h-48 rounded-xl border border-cyan-500/40 bg-cyan-500/10 overflow-hidden"},a.createElement("div",{className:"absolute inset-0 grid grid-rows-4 grid-cols-8 opacity-20"},[...Array(32)].map((_,A)=>a.createElement("div",{key:A,className:"border border-cyan-500/20"}))),a.createElement("div",{className:"absolute left-4 top-4 text-2xl font-extrabold drop-shadow animate-pulse"},v.toFixed(2),"x"),a.createElement("div",{className:`absolute -right-4 bottom-6 w-10 h-10 rounded-full bg-cyan-400 shadow-lg ${h?"animate-bounce":""}`}),f&&a.createElement("div",{className:"absolute inset-0 grid place-items-center text-3xl font-black text-red-400 animate-pulse"},"CRASH!"),w&&!f&&a.createElement("div",{className:"absolute inset-0 grid place-items-center text-xl font-bold text-emerald-400 animate-in fade-in"},"Ausgezahlt: ",(l*v*(1-kn)/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2"},[100,200,500,1e3].map(_=>a.createElement("button",{key:_,onClick:()=>E(_),className:`rounded-xl px-3 py-2 border ${l===_?"border-emerald-500 bg-emerald-500/20":"border-slate-700 bg-slate-800/60"}`},(_/100).toFixed(2)," ‚Ç¨"))),a.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2 disabled:opacity-50",onClick:S,disabled:h||o<l},a.createElement(ua,{size:16})," Start"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2 disabled:opacity-50",onClick:z,disabled:!h},a.createElement(Dt,{size:16})," Cash Out"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:B},a.createElement(_t,{size:16})," Reset")),a.createElement("div",{className:"mt-2 text-xs opacity-70"},"Hinweis: Demo - Gewinne werden mit kleinem Hausvorteil berechnet."))}const Qi=.015;function ea(o){const u=o+1,l=(u-1)/2;return Array.from({length:u},(v,C)=>{const N=Math.abs(C-l),M=N>l*.8?9:N>l*.6?4:N>l*.3?2:1.3;return Number(M.toFixed(2))})}function qo(){const[o,u]=g.useState(8),[l,E]=g.useState(()=>ea(8)),[v,C]=g.useState(5e3),[N,M]=g.useState(200),[h,y]=g.useState(!1),[f,b]=g.useState(null),[w,d]=g.useState(Math.floor(9/2)),[P,p]=g.useState(0),k=g.useRef(0);g.useEffect(()=>{E(ea(o)),d(Math.floor((o+1)/2)),p(0),b(null)},[o]),g.useEffect(()=>()=>clearInterval(k.current||0),[]);function S(){h||N<=0||v<N||(C(_=>_-N),b(null),y(!0),p(0),d(Math.floor((o+1)/2)),clearInterval(k.current),k.current=setInterval(()=>{p(_=>{if(_>=o)return clearInterval(k.current),y(!1),b(G=>{const V=G,de=l[V]||1,be=Math.floor(N*de*(1-Qi));return C(gt=>gt+be),{idx:V,multi:de,payout:be}}),_;const A=Math.random()<.5?-1:1;return d(G=>{let V=G+A;return V<0&&(V=0),V>o&&(V=o),V}),_+1})},220))}function z(){clearInterval(k.current),y(!1),b(null),p(0),d(Math.floor((o+1)/2))}const B=o+1;return Array.from({length:o},(_,A)=>Array.from({length:B},(G,V)=>V>0&&V<B&&V-1<=A&&V>=0)),a.createElement("div",{className:"rounded-2xl border border-amber-500/40 bg-gradient-to-b from-amber-500/10 to-slate-900/60 p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-sm font-semibold"},"Plinko (Demo) ‚Ä¢ Hausvorteil ",Math.round(Qi*1e3)/10,"%"),a.createElement("div",{className:"px-3 py-1 rounded-full bg-slate-800/70 text-xs"},"Guthaben: ",(v/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[340px_1fr] gap-4"},a.createElement("div",{className:"rounded-xl border border-amber-500/30 bg-amber-500/10 p-3"},a.createElement("div",{className:"text-xs opacity-80 mb-2 flex items-center gap-1"},a.createElement(Ln,{size:14})," Ball f√§llt durch ",o," Reihen"),a.createElement("div",{className:"relative mx-auto overflow-hidden rounded-xl bg-slate-900/60 border border-slate-800",style:{width:300,height:360}},a.createElement("div",{className:"absolute inset-0 p-3"},Array.from({length:o}).map((_,A)=>a.createElement("div",{key:A,className:"flex justify-between",style:{marginTop:A===0?0:300/(o+2)}},Array.from({length:B}).map((G,V)=>a.createElement("div",{key:V,className:"w-2 h-2 rounded-full",style:{background:"rgba(255,255,255,.25)"}})))),a.createElement("div",{className:"absolute transition-all duration-200",style:{left:w/(B-1)*276+12,top:P/(o+.6)*336,transform:"translate(-50%,-50%)"}},a.createElement("div",{className:`w-5 h-5 rounded-full bg-amber-400 shadow-lg ${h?"animate-bounce":""}`}))),a.createElement("div",{className:"absolute left-0 right-0 bottom-0 grid",style:{gridTemplateColumns:`repeat(${B},1fr)`}},l.map((_,A)=>a.createElement("div",{key:A,className:`py-2 text-center text-xs font-semibold ${A===w&&P>=o?"bg-amber-400/30":"bg-slate-900/70"} border-t border-slate-800`},"√ó",_.toFixed(2)))))),a.createElement("div",{className:"rounded-xl border border-amber-500/30 bg-slate-900/60 p-3"},a.createElement("div",{className:"text-sm font-semibold mb-2"},"Einsatz & Einstellungen"),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-6 gap-2"},[100,200,500,1e3,2e3,5e3].map(_=>a.createElement("button",{key:_,onClick:()=>M(_),className:`rounded-xl px-3 py-2 border ${N===_?"border-amber-500 bg-amber-500/20":"border-slate-700 bg-slate-800/60"}`},(_/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"col-span-2 sm:col-span-6 grid grid-cols-2 gap-2"},a.createElement("div",null,a.createElement("div",{className:"text-[11px] uppercase opacity-70 mb-1"},"Einsatz"),a.createElement("input",{type:"number",min:"50",step:"50",value:N,onChange:_=>M(Math.max(50,parseInt(_.target.value||0))),className:"w-full px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"})),a.createElement("div",null,a.createElement("div",{className:"text-[11px] uppercase opacity-70 mb-1"},"Reihen"),a.createElement("select",{value:o,onChange:_=>u(parseInt(_.target.value||8)),className:"w-full px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"},[6,8,10,12].map(_=>a.createElement("option",{key:_,value:_},_)))))),a.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2 disabled:opacity-50",onClick:S,disabled:h||v<N},a.createElement(Ln,{size:16})," Drop"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:z},a.createElement(_t,{size:16})," Reset")),a.createElement("div",{className:"mt-3 min-h-[48px]"},f&&a.createElement("div",{className:"p-3 rounded-xl border border-amber-500/40 bg-amber-500/10 animate-in fade-in"},a.createElement("div",{className:"text-sm"},"Gelandet in Slot ",a.createElement("b",null,"#",f.idx+1)," ‚Ä¢ Multiplikator ",a.createElement("b",null,"√ó",f.multi.toFixed(2)),a.createElement("br",null),"Auszahlung: ",a.createElement("b",null,(f.payout/100).toFixed(2)," ‚Ç¨")," (inkl. kleinem Hausvorteil)"))))),a.createElement("div",{className:"mt-2 text-xs opacity-70"},"Hinweis: Demo - Multiplikatoren sind simuliert, Auszahlungen ber√ºcksichtigen einen kleinen Hausvorteil."))}const pt=5,Pn=.015;function Rt(o){const u=Array.from({length:pt*pt},(l,E)=>E);for(let l=u.length-1;l>0;l--){const E=Math.floor(Math.random()*(l+1));[u[l],u[E]]=[u[E],u[l]]}return new Set(u.slice(0,o))}function Vo(o,u){const l=1+o*(.08+(u-3)*.01);return Number(l.toFixed(3))}function Ko(){const[o,u]=g.useState(5e3),[l,E]=g.useState(200),[v,C]=g.useState(5),[N,M]=g.useState(()=>Rt(5)),[h,y]=g.useState(new Set),[f,b]=g.useState(!1),[w,d]=g.useState(!1),P=g.useMemo(()=>Vo(h.size,v),[h.size,v]);function p(_=!1){_?(M(Rt(v)),y(new Set),b(!1),d(!1)):(y(new Set),b(!1),d(!1))}function k(){l<=0||o<l||(u(_=>_-l),y(new Set),b(!1),d(!1),M(Rt(v)))}function S(_){if(f||w)return;if(!h.size&&(l<=0||o+l<l),N.has(_)){b(!0);return}if(h.has(_))return;const A=new Set(h);A.add(_),y(A)}function z(){if(f||w||h.size===0)return;const _=Math.floor(l*P*(1-Pn));u(A=>A+_),d(!0)}const B=Array.from({length:pt*pt},(_,A)=>A);return a.createElement("div",{className:"rounded-2xl border border-rose-500/40 bg-gradient-to-b from-rose-600/10 to-slate-900/60 p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-sm font-semibold"},"Mines (Demo) ‚Ä¢ Hausvorteil ",Math.round(Pn*1e3)/10,"%"),a.createElement("div",{className:"px-3 py-1 rounded-full bg-slate-800/70 text-xs"},"Guthaben: ",(o/100).toFixed(2)," ‚Ç¨")),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-4"},a.createElement("div",{className:"rounded-xl border border-rose-500/30 bg-slate-900/60 p-3"},a.createElement("div",{className:"text-xs opacity-80 mb-2"},"W√§hle sichere Felder - Cash Out bevor du eine Mine triffst."),a.createElement("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${pt},1fr)`}},B.map(_=>{const A=h.has(_),G=N.has(_),V=f&&G;return a.createElement("button",{key:_,onClick:()=>S(_),className:`aspect-square rounded-xl border grid place-items-center text-lg font-bold select-none
                    ${A?"border-emerald-500/60 bg-emerald-500/15":"border-slate-700 bg-slate-800/60 hover:bg-slate-800"}
                    ${V?"animate-pulse border-rose-500 bg-rose-500/20 text-rose-300":""}`},V?a.createElement(aa,{size:22}):A?"‚úì":"")})),a.createElement("div",{className:"mt-2 text-xs opacity-70"},"Minen werden erst nach Verlust sichtbar. Anzahl Minen beeinflusst den Multiplikator-Zuwachs.")),a.createElement("div",{className:"rounded-xl border border-rose-500/30 bg-slate-900/60 p-3"},a.createElement("div",{className:"text-sm font-semibold mb-2"},"Einsatz & Einstellungen"),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-6 gap-2"},[100,200,500,1e3,2e3,5e3].map(_=>a.createElement("button",{key:_,onClick:()=>E(_),className:`rounded-xl px-3 py-2 border ${l===_?"border-rose-500 bg-rose-500/20":"border-slate-700 bg-slate-800/60"}`},(_/100).toFixed(2)," ‚Ç¨"))),a.createElement("div",{className:"grid grid-cols-2 gap-2 mt-2"},a.createElement("div",null,a.createElement("div",{className:"text-[11px] uppercase opacity-70 mb-1"},"Einsatz"),a.createElement("input",{type:"number",min:"50",step:"50",value:l,onChange:_=>E(Math.max(50,parseInt(_.target.value||0))),className:"w-full px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"})),a.createElement("div",null,a.createElement("div",{className:"text-[11px] uppercase opacity-70 mb-1"},"Minen"),a.createElement("select",{value:v,onChange:_=>{const A=parseInt(_.target.value||5);C(A),M(Rt(A)),y(new Set),b(!1),d(!1)},className:"w-full px-3 py-2 rounded-xl bg-slate-900 border border-slate-700"},[3,5,7,10].map(_=>a.createElement("option",{key:_,value:_},_))))),a.createElement("div",{className:"mt-3 p-3 rounded-xl border border-slate-700 bg-slate-800/60"},a.createElement("div",{className:"text-xs opacity-80"},"Aktueller Multiplikator"),a.createElement("div",{className:"text-2xl font-extrabold tracking-wide animate-pulse"},"√ó",P.toFixed(2))),a.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2 disabled:opacity-50",onClick:k,disabled:f||h.size>0||o<l},a.createElement(Dt,{size:16})," Start"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2 disabled:opacity-50",onClick:z,disabled:f||w||h.size===0},a.createElement(Dt,{size:16})," Cash Out"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2",onClick:()=>p(!0)},a.createElement(_t,{size:16})," Neue Runde")),(f||w)&&a.createElement("div",{className:"mt-3 p-3 rounded-xl border border-slate-700 bg-slate-800/60 animate-in fade-in"},f?a.createElement("div",{className:"text-rose-300"},"Boom üí• - Einsatz verloren."):a.createElement("div",{className:"text-emerald-300"},"Ausgezahlt: ",a.createElement("b",null,(l*P*(1-Pn)/100).toFixed(2)," ‚Ç¨"))))),a.createElement("div",{className:"mt-2 text-xs opacity-70"},"Hinweis: Demo - Multiplikator steigt je sicherem Feld. Auszahlungen beinhalten einen kleinen Hausvorteil."))}function Go(){const o=()=>{const v=((typeof window<"u"?window.location.hash:"#")||"#").replace(/^#\//,"").split("/");if(v[0]!=="games")return{mode:"select"};const C=(v[1]||"").toLowerCase();return["roulette","blackjack","crash","plinko","mines"].includes(C)?{mode:C}:{mode:"select"}},[u,l]=g.useState(o());return g.useEffect(()=>{const E=()=>l(o());return window.addEventListener("hashchange",E),()=>window.removeEventListener("hashchange",E)},[]),u.mode}function $o(){const o=Go(),u=l=>{window.location.hash=l?"#/games/"+l:"#/games"};if(o!=="select"){const l=o==="roulette"?"Roulette":o==="blackjack"?"Blackjack":o==="crash"?"Crash":o==="plinko"?"Plinko":"Mines";return a.createElement("div",{className:"pf-pt-safe pf-pb-safe p-3 space-y-3"},a.createElement("div",{className:"rounded-2xl p-4 border border-slate-800 bg-gradient-to-r from-fuchsia-600/15 via-cyan-600/15 to-emerald-600/15"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{className:"btn-ghost px-3 py-2 rounded-xl border border-slate-700",onClick:()=>u("")},a.createElement(ra,{size:16})," Zur Auswahl"),a.createElement("div",{className:"text-xl font-extrabold"},l),a.createElement("div",{className:"ml-auto text-xs opacity-80 flex items-center gap-1"},a.createElement(Sn,{size:14})," Demo-Modus ‚Ä¢ Spa√ü mit Farbe & Animation"))),o==="roulette"&&a.createElement(Do,null),o==="blackjack"&&a.createElement(Wo,null),o==="crash"&&a.createElement(Uo,null),o==="plinko"&&a.createElement(qo,null),o==="mines"&&a.createElement(Ko,null))}return a.createElement("div",{className:"pf-pt-safe pf-pb-safe p-3"},a.createElement("div",{className:"max-w-4xl mx-auto space-y-4 pb-24"},a.createElement("div",{className:"rounded-2xl p-5 bg-gradient-to-r from-fuchsia-600/20 via-cyan-600/20 to-emerald-600/20 border border-slate-800"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Sn,{size:16,className:"opacity-80"}),a.createElement("div",{className:"text-sm font-semibold"},"Spiel-Auswahl")),a.createElement("div",{className:"text-2xl font-extrabold leading-tight"},"W√§hle dein Spiel"),a.createElement("div",{className:"text-sm opacity-80"},"Demo-Modus ‚Ä¢ Animationen, Farben & Mini-Effekte üåà")),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3"},a.createElement("button",{onClick:()=>u("roulette"),className:"group rounded-2xl p-4 border border-fuchsia-500/40 bg-gradient-to-br from-fuchsia-600/20 to-fuchsia-600/5 hover:to-fuchsia-600/25 transition-all active:scale-[0.99]"},a.createElement("div",{className:"w-12 h-12 rounded-xl bg-fuchsia-600/30 flex items-center justify-center group-hover:rotate-12 transition"},a.createElement(la,{size:22})),a.createElement("div",{className:"mt-2 font-semibold"},"Roulette"),a.createElement("div",{className:"text-xs opacity-80"},"Rot/Schwarz/Gr√ºn mit drehendem Rad")),a.createElement("button",{onClick:()=>u("blackjack"),className:"group rounded-2xl p-4 border border-emerald-500/40 bg-gradient-to-br from-emerald-600/20 to-emerald-600/5 hover:to-emerald-600/25 transition-all active:scale-[0.99]"},a.createElement("div",{className:"w-12 h-12 rounded-xl bg-emerald-600/30 flex items-center justify-center group-hover:-rotate-6 transition"},a.createElement(ca,{size:22})),a.createElement("div",{className:"mt-2 font-semibold"},"Blackjack"),a.createElement("div",{className:"text-xs opacity-80"},"Hit/Stand mit h√ºbschen Karten")),a.createElement("button",{onClick:()=>u("crash"),className:"group rounded-2xl p-4 border border-cyan-500/40 bg-gradient-to-br from-cyan-600/20 to-cyan-600/5 hover:to-cyan-600/25 transition-all active:scale-[0.99]"},a.createElement("div",{className:"w-12 h-12 rounded-xl bg-cyan-600/30 flex items-center justify-center group-hover:scale-110 transition"},a.createElement(ua,{size:22})),a.createElement("div",{className:"mt-2 font-semibold"},"Crash"),a.createElement("div",{className:"text-xs opacity-80"},"Cash Out bevor es crasht")),a.createElement("button",{onClick:()=>u("plinko"),className:"group rounded-2xl p-4 border border-amber-500/40 bg-gradient-to-br from-amber-500/20 to-amber-500/5 hover:to-amber-500/25 transition-all active:scale-[0.99]"},a.createElement("div",{className:"w-12 h-12 rounded-xl bg-amber-500/30 flex items-center justify-center group-hover:translate-y-0.5 transition"},a.createElement(Ln,{size:22})),a.createElement("div",{className:"mt-2 font-semibold"},"Plinko"),a.createElement("div",{className:"text-xs opacity-80"},"Ball drop ‚Ä¢ Multiplikator-Slots")),a.createElement("button",{onClick:()=>u("mines"),className:"group rounded-2xl p-4 border border-rose-500/40 bg-gradient-to-br from-rose-600/20 to-rose-600/5 hover:to-rose-600/25 transition-all active:scale-[0.99]"},a.createElement("div",{className:"w-12 h-12 rounded-xl bg-rose-600/30 flex items-center justify-center group-hover:scale-110 transition"},a.createElement(aa,{size:22})),a.createElement("div",{className:"mt-2 font-semibold"},"Mines"),a.createElement("div",{className:"text-xs opacity-80"},"Minensuche ‚Ä¢ Safe-Tiles & Cashout")))))}function Jo(){const[o,u]=g.useState([]),[l,E]=g.useState([]),[v,C]=g.useState(!1),N=g.useRef(null),M=()=>{var b;return(b=N.current)==null?void 0:b.click()},h=b=>{const w=Array.from(b.target.files||[]);u(w)};async function y(){if(!o.length||v)return;C(!0);const b=[];for(const w of o){const d=new FormData;d.append("file",w);try{const p=await(await fetch("/api/admin/upload",{method:"POST",body:d,credentials:"include"})).json().catch(()=>({}));p!=null&&p.ok&&(p!=null&&p.url)?b.push({name:w.name,url:p.url,ok:!0}):b.push({name:w.name,url:"",ok:!1})}catch{b.push({name:w.name,url:"",ok:!1})}}E(b),C(!1)}const f=b=>{var w;return(w=navigator.clipboard)==null?void 0:w.writeText(b).catch(()=>{})};return a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-4"},a.createElement("div",{className:"text-sm font-semibold mb-2"},"Bilder hochladen"),a.createElement("input",{ref:N,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:h}),a.createElement("div",{className:"flex flex-wrap gap-2"},a.createElement("button",{className:"btn inline-flex items-center gap-2",onClick:M},a.createElement(Qr,{size:16})," Aus Galerie w√§hlen"),a.createElement("button",{className:"btn-ghost inline-flex items-center gap-2 disabled:opacity-50",onClick:y,disabled:!o.length||v},v?a.createElement(vr,{size:16,className:"animate-spin"}):a.createElement(sa,{size:16})," Upload starten")),!!o.length&&a.createElement("div",{className:"mt-2 text-xs opacity-70"},o.length," Dateien ausgew√§hlt")),!!l.length&&a.createElement("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-3"},a.createElement("div",{className:"text-sm font-semibold mb-2"},"Ergebnisse"),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},l.map((b,w)=>a.createElement("div",{key:w,className:"rounded-xl border border-slate-800 bg-slate-950 overflow-hidden"},a.createElement("div",{className:"aspect-[4/3] bg-slate-800"},b.ok&&a.createElement("img",{src:b.url,alt:b.name,className:"w-full h-full object-cover"})),a.createElement("div",{className:"p-2 text-xs break-all"},b.ok?a.createElement("span",{className:"text-emerald-400"},b.url):a.createElement("span",{className:"text-rose-400"},"Fehler")),b.ok&&a.createElement("button",{className:"w-full text-xs py-1 border-t border-slate-800 hover:bg-slate-900 flex items-center justify-center gap-1",onClick:()=>f(b.url)},a.createElement(sr,{size:12})," URL kopieren")))),a.createElement("div",{className:"mt-2 text-xs opacity-70"},"Tipp: Kopiere die Bild-URL und f√ºge sie bei deinen Produkten als ",a.createElement("code",null,"image_url")," oder ",a.createElement("code",null,"banner_image_url")," ein.")))}function Yo({goTo:o}){const u=l=>typeof o=="function"?o(l):window.location.hash=`#/${l}`;return a.createElement("div",{className:"pf-pt-safe pf-pb-safe p-3 space-y-3"},a.createElement("div",{className:"rounded-2xl p-4 border border-slate-800 bg-gradient-to-r from-emerald-600/15 via-cyan-600/15 to-fuchsia-600/15"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{className:"btn-ghost px-3 py-2 rounded-xl border border-slate-700",onClick:()=>u("admin")},a.createElement(ra,{size:16})," Zur√ºck zum Admin"),a.createElement("div",{className:"text-xl font-extrabold flex items-center gap-2"},a.createElement(_r,{size:18})," Galerie-Uploads")),a.createElement("div",{className:"text-xs opacity-80 mt-1"},"Lade Produktbilder hoch und verwende die generierten URLs in deinen Produkten.")),a.createElement(Jo,null))}function ta(){const u=((typeof window<"u"?window.location.hash:"#")||"#").replace(/^#\/?/,""),l=u.split("/").filter(Boolean),E=(l[0]||"").toLowerCase(),v=l.slice(1);return{path:E,rest:v,raw:u}}function Qo(){const[o,u]=g.useState(ta());g.useEffect(()=>{const M=()=>u(ta());return window.addEventListener("hashchange",M),()=>window.removeEventListener("hashchange",M)},[]);const E=g.useMemo(()=>({"":wn,home:wn,menu:ho,orders:_o,profile:go,checkout:ko,admin:Bo,courier:Zo,chat:Gi,support:Gi,games:$o,"admin-uploads":Yo}),[])[o.path]||wn,v=(M="")=>{const h=String(M||"");window.location.hash=h?`#/${h}`:"#/"},N=["","home","menu","checkout","profile","admin","courier"].includes(o.path)&&o.path||"";return a.createElement(uo,{active:N,goTo:v},a.createElement(E,{goTo:v,route:o}))}typeof navigator<"u"&&navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then(o=>o.forEach(u=>u.unregister())).catch(()=>{});export{Qo as default};
//# sourceMappingURL=App-CQ-9MJTn.js.map
